
(()=>{"use strict";var t={502:(t,e,n)=>{n.d(e,{Ey:()=>Ko,JG:()=>Po,LT:()=>Wo,jr:()=>Aa}),t=n.hmd(t);var r,i,o,s,a="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=a||c||Function("return this")(),h=u.Symbol,l=Object.prototype,d=l.hasOwnProperty,f=l.toString,p=h?h.toStringTag:void 0,m=Object.prototype.toString,T=h?h.toStringTag:void 0,E=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":T&&T in Object(t)?function(t){var e=d.call(t,p),n=t[p];try{t[p]=void 0;var r=!0}catch(t){}var i=f.call(t);return r&&(e?t[p]=n:delete t[p]),i}(t):function(t){return m.call(t)}(t)},g=function(t){return null!=t&&"object"==typeof t},A=function(t){return"symbol"==typeof t||g(t)&&"[object Symbol]"==E(t)},I=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},R=Array.isArray,v=h?h.prototype:void 0,y=v?v.toString:void 0,O=function t(e){if("string"==typeof e)return e;if(R(e))return I(e,t)+"";if(A(e))return y?y.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},N=/\s/,_=/^\s+/,S=function(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&N.test(t.charAt(e)););return e}(t)+1).replace(_,""):t},L=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},k=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,x=/^0o[0-7]+$/i,P=parseInt,b=1/0,M=function(t){return t?(t=function(t){if("number"==typeof t)return t;if(A(t))return NaN;if(L(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=L(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=S(t);var n=C.test(t);return n||x.test(t)?P(t.slice(2),n?2:8):k.test(t)?NaN:+t}(t))===b||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},w=function(t){var e=M(t),n=e%1;return e==e?n?e-n:e:0},U=function(t){return t},F=function(t){if(!L(t))return!1;var e=E(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},D=u["__core-js_shared__"],j=(r=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",G=Function.prototype.toString,B=function(t){if(null!=t){try{return G.call(t)}catch(t){}try{return t+""}catch(t){}}return""},$=/^\[object .+?Constructor\]$/,H=Function.prototype,K=Object.prototype,W=H.toString,V=K.hasOwnProperty,z=RegExp("^"+W.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=function(t){return!(!L(t)||(e=t,j&&j in e))&&(F(t)?z:$).test(B(t));var e},X=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Y(n)?n:void 0},q=X(u,"WeakMap"),J=Object.create,Q=function(){function t(){}return function(e){if(!L(e))return{};if(J)return J(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Z=function(){},tt=Date.now,et=function(){try{var t=X(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),nt=(i=et?function(t,e){return et(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:U,o=0,s=0,function(){var t=tt(),e=16-(t-s);if(s=t,e>0){if(++o>=800)return arguments[0]}else o=0;return i.apply(void 0,arguments)}),rt=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},it=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1},ot=function(t){return t!=t},st=function(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):it(t,ot,n)},at=function(t,e){return!(null==t||!t.length)&&st(t,e,0)>-1},ct=/^(?:0|[1-9]\d*)$/,ut=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ct.test(t))&&t>-1&&t%1==0&&t<e},ht=function(t,e,n){"__proto__"==e&&et?et(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},lt=function(t,e){return t===e||t!=t&&e!=e},dt=Object.prototype.hasOwnProperty,ft=function(t,e,n){var r=t[e];dt.call(t,e)&&lt(r,n)&&(void 0!==n||e in t)||ht(t,e,n)},pt=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),i?ht(n,a,c):ft(n,a,c)}return n},mt=Math.max,Tt=function(t,e){return nt(function(t,e,n){return e=mt(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=mt(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,a)}}(t,e,U),t+"")},Et=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},gt=function(t){return null!=t&&Et(t.length)&&!F(t)},At=function(t,e,n){if(!L(n))return!1;var r=typeof e;return!!("number"==r?gt(n)&&ut(e,n.length):"string"==r&&e in n)&&lt(n[e],t)},It=Object.prototype,Rt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||It)},vt=function(t){return g(t)&&"[object Arguments]"==E(t)},yt=Object.prototype,Ot=yt.hasOwnProperty,Nt=yt.propertyIsEnumerable,_t=vt(function(){return arguments}())?vt:function(t){return g(t)&&Ot.call(t,"callee")&&!Nt.call(t,"callee")},St="object"==typeof exports&&exports&&!exports.nodeType&&exports,Lt=St&&t&&!t.nodeType&&t,kt=Lt&&Lt.exports===St?u.Buffer:void 0,Ct=(kt?kt.isBuffer:void 0)||function(){return!1},xt={};xt["[object Float32Array]"]=xt["[object Float64Array]"]=xt["[object Int8Array]"]=xt["[object Int16Array]"]=xt["[object Int32Array]"]=xt["[object Uint8Array]"]=xt["[object Uint8ClampedArray]"]=xt["[object Uint16Array]"]=xt["[object Uint32Array]"]=!0,xt["[object Arguments]"]=xt["[object Array]"]=xt["[object ArrayBuffer]"]=xt["[object Boolean]"]=xt["[object DataView]"]=xt["[object Date]"]=xt["[object Error]"]=xt["[object Function]"]=xt["[object Map]"]=xt["[object Number]"]=xt["[object Object]"]=xt["[object RegExp]"]=xt["[object Set]"]=xt["[object String]"]=xt["[object WeakMap]"]=!1;var Pt,bt=function(t){return function(e){return t(e)}},Mt="object"==typeof exports&&exports&&!exports.nodeType&&exports,wt=Mt&&t&&!t.nodeType&&t,Ut=wt&&wt.exports===Mt&&a.process,Ft=function(){try{return wt&&wt.require&&wt.require("util").types||Ut&&Ut.binding&&Ut.binding("util")}catch(t){}}(),Dt=Ft&&Ft.isTypedArray,jt=Dt?bt(Dt):function(t){return g(t)&&Et(t.length)&&!!xt[E(t)]},Gt=Object.prototype.hasOwnProperty,Bt=function(t,e){var n=R(t),r=!n&&_t(t),i=!n&&!r&&Ct(t),o=!n&&!r&&!i&&jt(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=a.length;for(var u in t)!e&&!Gt.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ut(u,c))||a.push(u);return a},$t=function(t,e){return function(n){return t(e(n))}},Ht=$t(Object.keys,Object),Kt=Object.prototype.hasOwnProperty,Wt=function(t){if(!Rt(t))return Ht(t);var e=[];for(var n in Object(t))Kt.call(t,n)&&"constructor"!=n&&e.push(n);return e},Vt=function(t){return gt(t)?Bt(t):Wt(t)},zt=Object.prototype.hasOwnProperty,Yt=(Pt=function(t,e){if(Rt(e)||gt(e))pt(e,Vt(e),t);else for(var n in e)zt.call(e,n)&&ft(t,n,e[n])},Tt((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=Pt.length>3&&"function"==typeof i?(r--,i):void 0,o&&At(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var s=e[n];s&&Pt(t,s,n,i)}return t}))),Xt=Object.prototype.hasOwnProperty,qt=function(t){if(!L(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Rt(t),n=[];for(var r in t)("constructor"!=r||!e&&Xt.call(t,r))&&n.push(r);return n},Jt=function(t){return gt(t)?Bt(t,!0):qt(t)},Qt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zt=/^\w*$/,te=function(t,e){if(R(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!A(t))||Zt.test(t)||!Qt.test(t)||null!=e&&t in Object(e)},ee=X(Object,"create"),ne=Object.prototype.hasOwnProperty,re=Object.prototype.hasOwnProperty;function ie(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ie.prototype.clear=function(){this.__data__=ee?ee(null):{},this.size=0},ie.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ie.prototype.get=function(t){var e=this.__data__;if(ee){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ne.call(e,t)?e[t]:void 0},ie.prototype.has=function(t){var e=this.__data__;return ee?void 0!==e[t]:re.call(e,t)},ie.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ee&&void 0===e?"__lodash_hash_undefined__":e,this};var oe=ie,se=function(t,e){for(var n=t.length;n--;)if(lt(t[n][0],e))return n;return-1},ae=Array.prototype.splice;function ce(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ce.prototype.clear=function(){this.__data__=[],this.size=0},ce.prototype.delete=function(t){var e=this.__data__,n=se(e,t);return!(n<0||(n==e.length-1?e.pop():ae.call(e,n,1),--this.size,0))},ce.prototype.get=function(t){var e=this.__data__,n=se(e,t);return n<0?void 0:e[n][1]},ce.prototype.has=function(t){return se(this.__data__,t)>-1},ce.prototype.set=function(t,e){var n=this.__data__,r=se(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var ue=ce,he=X(u,"Map"),le=function(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map};function de(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}de.prototype.clear=function(){this.size=0,this.__data__={hash:new oe,map:new(he||ue),string:new oe}},de.prototype.delete=function(t){var e=le(this,t).delete(t);return this.size-=e?1:0,e},de.prototype.get=function(t){return le(this,t).get(t)},de.prototype.has=function(t){return le(this,t).has(t)},de.prototype.set=function(t,e){var n=le(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var fe=de;function pe(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(pe.Cache||fe),n}pe.Cache=fe;var me,Te,Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ge=/\\(\\)?/g,Ae=(me=pe((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ee,(function(t,n,r,i){e.push(r?i.replace(ge,"$1"):n||t)})),e}),(function(t){return 500===Te.size&&Te.clear(),t})),Te=me.cache,me),Ie=function(t){return null==t?"":O(t)},Re=function(t,e){return R(t)?t:te(t,e)?[t]:Ae(Ie(t))},ve=function(t){if("string"==typeof t||A(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},ye=function(t,e){for(var n=0,r=(e=Re(e,t)).length;null!=t&&n<r;)t=t[ve(e[n++])];return n&&n==r?t:void 0},Oe=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Ne=h?h.isConcatSpreadable:void 0,_e=function(t){return R(t)||_t(t)||!!(Ne&&t&&t[Ne])},Se=function t(e,n,r,i,o){var s=-1,a=e.length;for(r||(r=_e),o||(o=[]);++s<a;){var c=e[s];n>0&&r(c)?n>1?t(c,n-1,r,i,o):Oe(o,c):i||(o[o.length]=c)}return o},Le=function(t){return null!=t&&t.length?Se(t,1):[]},ke=$t(Object.getPrototypeOf,Object),Ce=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o},xe=(RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),"\\ud800-\\udfff"),Pe="["+xe+"]",be="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Me="\\ud83c[\\udffb-\\udfff]",we="[^"+xe+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",Fe="[\\ud800-\\udbff][\\udc00-\\udfff]",De="(?:"+be+"|"+Me+")?",je="[\\ufe0e\\ufe0f]?",Ge=je+De+"(?:\\u200d(?:"+[we,Ue,Fe].join("|")+")"+je+De+")*",Be="(?:"+[we+be+"?",be,Ue,Fe,Pe].join("|")+")";RegExp(Me+"(?="+Me+")|"+Be+Ge,"g");var $e=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n};function He(t){var e=this.__data__=new ue(t);this.size=e.size}He.prototype.clear=function(){this.__data__=new ue,this.size=0},He.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},He.prototype.get=function(t){return this.__data__.get(t)},He.prototype.has=function(t){return this.__data__.has(t)},He.prototype.set=function(t,e){var n=this.__data__;if(n instanceof ue){var r=n.__data__;if(!he||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new fe(r)}return n.set(t,e),this.size=n.size,this};var Ke=He,We="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ve=We&&t&&!t.nodeType&&t,ze=Ve&&Ve.exports===We?u.Buffer:void 0,Ye=ze?ze.allocUnsafe:void 0,Xe=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o},qe=function(){return[]},Je=Object.prototype.propertyIsEnumerable,Qe=Object.getOwnPropertySymbols,Ze=Qe?function(t){return null==t?[]:(t=Object(t),Xe(Qe(t),(function(e){return Je.call(t,e)})))}:qe,tn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Oe(e,Ze(t)),t=ke(t);return e}:qe,en=function(t,e,n){var r=e(t);return R(t)?r:Oe(r,n(t))},nn=function(t){return en(t,Vt,Ze)},rn=function(t){return en(t,Jt,tn)},on=X(u,"DataView"),sn=X(u,"Promise"),an=X(u,"Set"),cn="[object Map]",un="[object Promise]",hn="[object Set]",ln="[object WeakMap]",dn="[object DataView]",fn=B(on),pn=B(he),mn=B(sn),Tn=B(an),En=B(q),gn=E;(on&&gn(new on(new ArrayBuffer(1)))!=dn||he&&gn(new he)!=cn||sn&&gn(sn.resolve())!=un||an&&gn(new an)!=hn||q&&gn(new q)!=ln)&&(gn=function(t){var e=E(t),n="[object Object]"==e?t.constructor:void 0,r=n?B(n):"";if(r)switch(r){case fn:return dn;case pn:return cn;case mn:return un;case Tn:return hn;case En:return ln}return e});var An=gn,In=Object.prototype.hasOwnProperty,Rn=u.Uint8Array,vn=function(t){var e=new t.constructor(t.byteLength);return new Rn(e).set(new Rn(t)),e},yn=/\w*$/,On=h?h.prototype:void 0,Nn=On?On.valueOf:void 0,_n=function(t,e,n){var r,i=t.constructor;switch(e){case"[object ArrayBuffer]":return vn(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return function(t,e){var n=e?vn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var n=e?vn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,yn.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return r=t,Nn?Object(Nn.call(r)):{}}},Sn=Ft&&Ft.isMap,Ln=Sn?bt(Sn):function(t){return g(t)&&"[object Map]"==An(t)},kn=Ft&&Ft.isSet,Cn=kn?bt(kn):function(t){return g(t)&&"[object Set]"==An(t)},xn="[object Arguments]",Pn="[object Function]",bn="[object Object]",Mn={};Mn[xn]=Mn["[object Array]"]=Mn["[object ArrayBuffer]"]=Mn["[object DataView]"]=Mn["[object Boolean]"]=Mn["[object Date]"]=Mn["[object Float32Array]"]=Mn["[object Float64Array]"]=Mn["[object Int8Array]"]=Mn["[object Int16Array]"]=Mn["[object Int32Array]"]=Mn["[object Map]"]=Mn["[object Number]"]=Mn[bn]=Mn["[object RegExp]"]=Mn["[object Set]"]=Mn["[object String]"]=Mn["[object Symbol]"]=Mn["[object Uint8Array]"]=Mn["[object Uint8ClampedArray]"]=Mn["[object Uint16Array]"]=Mn["[object Uint32Array]"]=!0,Mn["[object Error]"]=Mn[Pn]=Mn["[object WeakMap]"]=!1;var wn=function t(e,n,r,i,o,s){var a,c=1&n,u=2&n,h=4&n;if(r&&(a=o?r(e,i,o,s):r(e)),void 0!==a)return a;if(!L(e))return e;var l=R(e);if(l){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&In.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!c)return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(e,a)}else{var d=An(e),f=d==Pn||"[object GeneratorFunction]"==d;if(Ct(e))return function(t,e){if(e)return t.slice();var n=t.length,r=Ye?Ye(n):new t.constructor(n);return t.copy(r),r}(e,c);if(d==bn||d==xn||f&&!o){if(a=u||f?{}:function(t){return"function"!=typeof t.constructor||Rt(t)?{}:Q(ke(t))}(e),!c)return u?function(t,e){return pt(t,tn(t),e)}(e,function(t,e){return t&&pt(e,Jt(e),t)}(a,e)):function(t,e){return pt(t,Ze(t),e)}(e,function(t,e){return t&&pt(e,Vt(e),t)}(a,e))}else{if(!Mn[d])return o?e:{};a=_n(e,d,c)}}s||(s=new Ke);var p=s.get(e);if(p)return p;s.set(e,a),Cn(e)?e.forEach((function(i){a.add(t(i,n,r,i,e,s))})):Ln(e)&&e.forEach((function(i,o){a.set(o,t(i,n,r,o,e,s))}));var m=l?void 0:(h?u?rn:nn:u?Jt:Vt)(e);return rt(m||e,(function(i,o){m&&(i=e[o=i]),ft(a,o,t(i,n,r,o,e,s))})),a},Un=function(t){return wn(t,4)},Fn=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i};function Dn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new fe;++e<n;)this.add(t[e])}Dn.prototype.add=Dn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Dn.prototype.has=function(t){return this.__data__.has(t)};var jn,Gn,Bn,$n=Dn,Hn=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Kn=function(t,e){return t.has(e)},Wn=function(t,e,n,r,i,o){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var u=o.get(t),h=o.get(e);if(u&&h)return u==e&&h==t;var l=-1,d=!0,f=2&n?new $n:void 0;for(o.set(t,e),o.set(e,t);++l<a;){var p=t[l],m=e[l];if(r)var T=s?r(m,p,l,e,t,o):r(p,m,l,t,e,o);if(void 0!==T){if(T)continue;d=!1;break}if(f){if(!Hn(e,(function(t,e){if(!Kn(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){d=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d},Vn=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},zn=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},Yn=h?h.prototype:void 0,Xn=Yn?Yn.valueOf:void 0,qn=Object.prototype.hasOwnProperty,Jn="[object Arguments]",Qn="[object Array]",Zn="[object Object]",tr=Object.prototype.hasOwnProperty,er=function(t,e,n,r,i,o){var s=R(t),a=R(e),c=s?Qn:An(t),u=a?Qn:An(e),h=(c=c==Jn?Zn:c)==Zn,l=(u=u==Jn?Zn:u)==Zn,d=c==u;if(d&&Ct(t)){if(!Ct(e))return!1;s=!0,h=!1}if(d&&!h)return o||(o=new Ke),s||jt(t)?Wn(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Rn(t),new Rn(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return lt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=Vn;case"[object Set]":var c=1&r;if(a||(a=zn),t.size!=e.size&&!c)return!1;var u=s.get(t);if(u)return u==e;r|=2,s.set(t,e);var h=Wn(a(t),a(e),r,i,o,s);return s.delete(t),h;case"[object Symbol]":if(Xn)return Xn.call(t)==Xn.call(e)}return!1}(t,e,c,n,r,i,o);if(!(1&n)){var f=h&&tr.call(t,"__wrapped__"),p=l&&tr.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,T=p?e.value():e;return o||(o=new Ke),i(m,T,n,r,o)}}return!!d&&(o||(o=new Ke),function(t,e,n,r,i,o){var s=1&n,a=nn(t),c=a.length;if(c!=nn(e).length&&!s)return!1;for(var u=c;u--;){var h=a[u];if(!(s?h in e:qn.call(e,h)))return!1}var l=o.get(t),d=o.get(e);if(l&&d)return l==e&&d==t;var f=!0;o.set(t,e),o.set(e,t);for(var p=s;++u<c;){var m=t[h=a[u]],T=e[h];if(r)var E=s?r(T,m,h,e,t,o):r(m,T,h,t,e,o);if(!(void 0===E?m===T||i(m,T,n,r,o):E)){f=!1;break}p||(p="constructor"==h)}if(f&&!p){var g=t.constructor,A=e.constructor;g==A||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof A&&A instanceof A||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))},nr=function t(e,n,r,i,o){return e===n||(null==e||null==n||!g(e)&&!g(n)?e!=e&&n!=n:er(e,n,r,i,t,o))},rr=function(t){return t==t&&!L(t)},ir=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},or=function(t){var e=function(t){for(var e=Vt(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,rr(i)]}return e}(t);return 1==e.length&&e[0][2]?ir(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var c=(a=n[i])[0],u=t[c],h=a[1];if(s&&a[2]){if(void 0===u&&!(c in t))return!1}else{var l=new Ke;if(r)var d=r(u,h,c,t,e,l);if(!(void 0===d?nr(h,u,3,r,l):d))return!1}}return!0}(n,t,e)}},sr=function(t,e){return null!=t&&e in Object(t)},ar=function(t,e,n){for(var r=-1,i=(e=Re(e,t)).length,o=!1;++r<i;){var s=ve(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Et(i)&&ut(s,i)&&(R(t)||_t(t))},cr=function(t,e){return te(t)&&rr(e)?ir(ve(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:ye(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?function(t,e){return null!=t&&ar(t,e,sr)}(n,t):nr(e,r,3)}},ur=function(t){return te(t)?(e=ve(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return ye(e,t)}}(t);var e},hr=function(t){return"function"==typeof t?t:null==t?U:"object"==typeof t?R(t)?cr(t[0],t[1]):or(t):ur(t)},lr=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r},dr=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),s=o.length;s--;){var a=o[++r];if(!1===e(i[a],a,i))break}return t},fr=function(t,e){if(null==t)return t;if(!gt(t))return function(t,e){return t&&dr(t,e,Vt)}(t,e);for(var n=t.length,r=-1,i=Object(t);++r<n&&!1!==e(i[r],r,i););return t},pr=function(t,e,n,r){return fr(t,(function(t,i,o){e(r,t,n(t),o)})),r},mr=Object.prototype,Tr=mr.hasOwnProperty,Er=Tt((function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&At(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=Jt(o),a=-1,c=s.length;++a<c;){var u=s[a],h=t[u];(void 0===h||lt(h,mr[u])&&!Tr.call(t,u))&&(t[u]=o[u])}return t})),gr=function(t){return g(t)&&gt(t)},Ar=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1},Ir=Tt((function(t,e){return gr(t)?function(t,e,n,r){var i=-1,o=at,s=!0,a=t.length,c=[],u=e.length;if(!a)return c;n&&(e=I(e,bt(n))),r?(o=Ar,s=!1):e.length>=200&&(o=Kn,s=!1,e=new $n(e));t:for(;++i<a;){var h=t[i],l=null==n?h:n(h);if(h=r||0!==h?h:0,s&&l==l){for(var d=u;d--;)if(e[d]===l)continue t;c.push(h)}else o(e,l,r)||c.push(h)}return c}(t,Se(e,1,gr,!0)):[]})),Rr=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},vr=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:w(e),Ce(t,e<0?0:e,r)):[]},yr=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:w(e),Ce(t,0,(e=r-e)<0?0:e)):[]},Or=function(t,e){return(R(t)?rt:fr)(t,"function"==typeof(n=e)?n:U);var n},Nr=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0},_r=function(t,e){var n=!0;return fr(t,(function(t,r,i){return n=!!e(t,r,i)})),n},Sr=function(t,e,n){var r=R(t)?Nr:_r;return n&&At(t,e,n)&&(e=void 0),r(t,hr(e))},Lr=function(t,e){var n=[];return fr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n},kr=function(t,e){return(R(t)?Xe:Lr)(t,hr(e))},Cr=Math.max,xr=(jn=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:w(n);return i<0&&(i=Cr(r+i,0)),it(t,hr(e),i)},function(t,e,n){var r=Object(t);if(!gt(t)){var i=hr(e);t=Vt(t),e=function(t){return i(r[t],t,r)}}var o=jn(t,e,n);return o>-1?r[i?t[o]:o]:void 0}),Pr=function(t){return t&&t.length?t[0]:void 0},br=function(t,e){var n=-1,r=gt(t)?Array(t.length):[];return fr(t,(function(t,i,o){r[++n]=e(t,i,o)})),r},Mr=function(t,e){return(R(t)?I:br)(t,hr(e))},wr=function(t,e){return Se(Mr(t,e),1)},Ur=Object.prototype.hasOwnProperty,Fr=(Gn=function(t,e,n){Ur.call(t,n)?t[n].push(e):ht(t,n,[e])},function(t,e){var n=R(t)?lr:pr,r=Bn?Bn():{};return n(t,Gn,hr(e),r)}),Dr=Object.prototype.hasOwnProperty,jr=function(t,e){return null!=t&&Dr.call(t,e)},Gr=function(t,e){return null!=t&&ar(t,e,jr)},Br=function(t){return"string"==typeof t||!R(t)&&g(t)&&"[object String]"==E(t)},$r=function(t){return null==t?[]:function(t,e){return I(e,(function(e){return t[e]}))}(t,Vt(t))},Hr=Math.max,Kr=function(t,e,n,r){t=gt(t)?t:$r(t),n=n&&!r?w(n):0;var i=t.length;return n<0&&(n=Hr(i+n,0)),Br(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&st(t,e,n)>-1},Wr=Math.max,Vr=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:w(n);return i<0&&(i=Wr(r+i,0)),st(t,e,i)},zr=Object.prototype.hasOwnProperty,Yr=function(t){if(null==t)return!0;if(gt(t)&&(R(t)||"string"==typeof t||"function"==typeof t.splice||Ct(t)||jt(t)||_t(t)))return!t.length;var e=An(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Rt(t))return!Wt(t).length;for(var n in t)if(zr.call(t,n))return!1;return!0},Xr=Ft&&Ft.isRegExp,qr=Xr?bt(Xr):function(t){return g(t)&&"[object RegExp]"==E(t)},Jr=function(t){return void 0===t},Qr=function(t,e,n,r){if(!L(t))return t;for(var i=-1,o=(e=Re(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var c=ve(e[i]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(i!=s){var h=a[c];void 0===(u=r?r(h,c,a):void 0)&&(u=L(h)?h:ut(e[i+1])?[]:{})}ft(a,c,u),a=a[c]}return t},Zr=function(t,e){if(null==t)return{};var n=I(rn(t),(function(t){return[t]}));return e=hr(e),function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=ye(t,s);n(a,s)&&Qr(o,Re(s,t),a)}return o}(t,n,(function(t,n){return e(t,n[0])}))},ti=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n},ei=function(t,e,n){var r=R(t)?$e:ti,i=arguments.length<3;return r(t,hr(e),n,i,fr)},ni=function(t,e){return(R(t)?Xe:Lr)(t,function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}(hr(e)))},ri=function(t,e){var n;return fr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n},ii=function(t,e,n){var r=R(t)?Hn:ri;return n&&At(t,e,n)&&(e=void 0),r(t,hr(e))},oi=an&&1/zn(new an([,-0]))[1]==1/0?function(t){return new an(t)}:Z,si=function(t){return t&&t.length?function(t,e,n){var r=-1,i=at,o=t.length,s=!0,a=[],c=a;if(n)s=!1,i=Ar;else if(o>=200){var u=e?null:oi(t);if(u)return zn(u);s=!1,i=Kn,c=new $n}else c=e?[]:a;t:for(;++r<o;){var h=t[r],l=e?e(h):h;if(h=n||0!==h?h:0,s&&l==l){for(var d=c.length;d--;)if(c[d]===l)continue t;e&&c.push(l),a.push(h)}else i(c,l,n)||(c!==a&&c.push(l),a.push(h))}return a}(t):[]};function ai(t){console&&console.error&&console.error(`Error: ${t}`)}function ci(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function ui(t){const e=(new Date).getTime(),n=t();return{time:(new Date).getTime()-e,value:n}}function hi(t){function e(){}e.prototype=t;const n=new e;function r(){return typeof n.bar}return r(),r(),t}var li=class{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){this._definition=t}accept(t){t.visit(this),Or(this.definition,(e=>{e.accept(t)}))}},di=class extends li{constructor(t){super([]),this.idx=1,Yt(this,Zr(t,(t=>void 0!==t)))}set definition(t){}get definition(){return void 0!==this.referencedRule?this.referencedRule.definition:[]}accept(t){t.visit(this)}},fi=class extends li{constructor(t){super(t.definition),this.orgText="",Yt(this,Zr(t,(t=>void 0!==t)))}},pi=class extends li{constructor(t){super(t.definition),this.ignoreAmbiguities=!1,Yt(this,Zr(t,(t=>void 0!==t)))}},mi=class extends li{constructor(t){super(t.definition),this.idx=1,Yt(this,Zr(t,(t=>void 0!==t)))}},Ti=class extends li{constructor(t){super(t.definition),this.idx=1,Yt(this,Zr(t,(t=>void 0!==t)))}},Ei=class extends li{constructor(t){super(t.definition),this.idx=1,Yt(this,Zr(t,(t=>void 0!==t)))}},gi=class extends li{constructor(t){super(t.definition),this.idx=1,Yt(this,Zr(t,(t=>void 0!==t)))}},Ai=class extends li{constructor(t){super(t.definition),this.idx=1,Yt(this,Zr(t,(t=>void 0!==t)))}},Ii=class extends li{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){super(t.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Yt(this,Zr(t,(t=>void 0!==t)))}},Ri=class{constructor(t){this.idx=1,Yt(this,Zr(t,(t=>void 0!==t)))}accept(t){t.visit(this)}};function vi(t){function e(t){return Mr(t,vi)}if(t instanceof di){const e={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return Br(t.label)&&(e.label=t.label),e}if(t instanceof pi)return{type:"Alternative",definition:e(t.definition)};if(t instanceof mi)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof Ti)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Ei)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:vi(new Ri({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Ai)return{type:"RepetitionWithSeparator",idx:t.idx,separator:vi(new Ri({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof gi)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof Ii)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof Ri){const e={type:"Terminal",name:t.terminalType.name,label:(n=t.terminalType,Br((r=n).LABEL)&&""!==r.LABEL?n.LABEL:n.name),idx:t.idx};Br(t.label)&&(e.terminalLabel=t.label);const i=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(e.pattern=qr(i)?i.source:i),e}var n,r;if(t instanceof fi)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}var yi=class{visit(t){const e=t;switch(e.constructor){case di:return this.visitNonTerminal(e);case pi:return this.visitAlternative(e);case mi:return this.visitOption(e);case Ti:return this.visitRepetitionMandatory(e);case Ei:return this.visitRepetitionMandatoryWithSeparator(e);case Ai:return this.visitRepetitionWithSeparator(e);case gi:return this.visitRepetition(e);case Ii:return this.visitAlternation(e);case Ri:return this.visitTerminal(e);case fi:return this.visitRule(e);default:throw Error("non exhaustive match")}}visitNonTerminal(t){}visitAlternative(t){}visitOption(t){}visitRepetition(t){}visitRepetitionMandatory(t){}visitRepetitionMandatoryWithSeparator(t){}visitRepetitionWithSeparator(t){}visitAlternation(t){}visitTerminal(t){}visitRule(t){}};function Oi(t,e=[]){return!!(t instanceof mi||t instanceof gi||t instanceof Ai)||(t instanceof Ii?ii(t.definition,(t=>Oi(t,e))):!(t instanceof di&&Kr(e,t))&&t instanceof li&&(t instanceof di&&e.push(t),Sr(t.definition,(t=>Oi(t,e)))))}function Ni(t){if(t instanceof di)return"SUBRULE";if(t instanceof mi)return"OPTION";if(t instanceof Ii)return"OR";if(t instanceof Ti)return"AT_LEAST_ONE";if(t instanceof Ei)return"AT_LEAST_ONE_SEP";if(t instanceof Ai)return"MANY_SEP";if(t instanceof gi)return"MANY";if(t instanceof Ri)return"CONSUME";throw Error("non exhaustive match")}var _i=class{walk(t,e=[]){Or(t.definition,((n,r)=>{const i=vr(t.definition,r+1);if(n instanceof di)this.walkProdRef(n,i,e);else if(n instanceof Ri)this.walkTerminal(n,i,e);else if(n instanceof pi)this.walkFlat(n,i,e);else if(n instanceof mi)this.walkOption(n,i,e);else if(n instanceof Ti)this.walkAtLeastOne(n,i,e);else if(n instanceof Ei)this.walkAtLeastOneSep(n,i,e);else if(n instanceof Ai)this.walkManySep(n,i,e);else if(n instanceof gi)this.walkMany(n,i,e);else{if(!(n instanceof Ii))throw Error("non exhaustive match");this.walkOr(n,i,e)}}))}walkTerminal(t,e,n){}walkProdRef(t,e,n){}walkFlat(t,e,n){const r=e.concat(n);this.walk(t,r)}walkOption(t,e,n){const r=e.concat(n);this.walk(t,r)}walkAtLeastOne(t,e,n){const r=[new mi({definition:t.definition})].concat(e,n);this.walk(t,r)}walkAtLeastOneSep(t,e,n){const r=Si(t,e,n);this.walk(t,r)}walkMany(t,e,n){const r=[new mi({definition:t.definition})].concat(e,n);this.walk(t,r)}walkManySep(t,e,n){const r=Si(t,e,n);this.walk(t,r)}walkOr(t,e,n){const r=e.concat(n);Or(t.definition,(t=>{const e=new pi({definition:[t]});this.walk(e,r)}))}};function Si(t,e,n){return[new mi({definition:[new Ri({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}function Li(t){if(t instanceof di)return Li(t.referencedRule);if(t instanceof Ri)return[t.terminalType];if(function(t){return t instanceof pi||t instanceof mi||t instanceof gi||t instanceof Ti||t instanceof Ei||t instanceof Ai||t instanceof Ri||t instanceof fi}(t))return function(t){let e=[];const n=t.definition;let r,i=0,o=n.length>i,s=!0;for(;o&&s;)r=n[i],s=Oi(r),e=e.concat(Li(r)),i+=1,o=n.length>i;return si(e)}(t);if(function(t){return t instanceof Ii}(t))return function(t){const e=Mr(t.definition,(t=>Li(t)));return si(Le(e))}(t);throw Error("non exhaustive match")}var ki="_~IN~_",Ci=class extends _i{constructor(t){super(),this.topProd=t,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(t,e,n){}walkProdRef(t,e,n){const r=(i=t.referencedRule,o=t.idx,i.name+o+ki+this.topProd.name);var i,o;const s=e.concat(n),a=Li(new pi({definition:s}));this.follows[r]=a}};function xi(t){return t.charCodeAt(0)}function Pi(t,e){Array.isArray(t)?t.forEach((function(t){e.push(t)})):e.push(t)}function bi(t,e){if(!0===t[e])throw"duplicate flag "+e;t[e],t[e]=!0}function Mi(t){if(void 0===t)throw Error("Internal Error - Should never get here!");return!0}function wi(){throw Error("Internal Error - Should never get here!")}function Ui(t){return"Character"===t.type}var Fi=[];for(let t=xi("0");t<=xi("9");t++)Fi.push(t);var Di=[xi("_")].concat(Fi);for(let t=xi("a");t<=xi("z");t++)Di.push(t);for(let t=xi("A");t<=xi("Z");t++)Di.push(t);var ji=[xi(" "),xi("\f"),xi("\n"),xi("\r"),xi("\t"),xi("\v"),xi("\t"),xi(" "),xi(" "),xi(" "),xi(" "),xi(" "),xi(" "),xi(" "),xi(" "),xi(" "),xi(" "),xi(" "),xi(" "),xi(" "),xi("\u2028"),xi("\u2029"),xi(" "),xi(" "),xi("　"),xi("\ufeff")],Gi=/[0-9a-fA-F]/,Bi=/[0-9]/,$i=/[1-9]/,Hi=class{visitChildren(t){for(const e in t){const n=t[e];t.hasOwnProperty(e)&&(void 0!==n.type?this.visit(n):Array.isArray(n)&&n.forEach((t=>{this.visit(t)}),this))}}visit(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t)}this.visitChildren(t)}visitPattern(t){}visitFlags(t){}visitDisjunction(t){}visitAlternative(t){}visitStartAnchor(t){}visitEndAnchor(t){}visitWordBoundary(t){}visitNonWordBoundary(t){}visitLookahead(t){}visitNegativeLookahead(t){}visitCharacter(t){}visitSet(t){}visitGroup(t){}visitGroupBackReference(t){}visitQuantifier(t){}},Ki={},Wi=new class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx}pattern(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");const e=this.disjunction();this.consumeChar("/");const n={type:"Flags",loc:{begin:this.idx,end:t.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":bi(n,"global");break;case"i":bi(n,"ignoreCase");break;case"m":bi(n,"multiLine");break;case"u":bi(n,"unicode");break;case"y":bi(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:e,loc:this.loc(0)}}disjunction(){const t=[],e=this.idx;for(t.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t,loc:this.loc(e)}}alternative(){const t=[],e=this.idx;for(;this.isTerm();)t.push(this.term());return{type:"Alternative",value:t,loc:this.loc(e)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const t=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(t)};case"$":return{type:"EndAnchor",loc:this.loc(t)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(t)};case"B":return{type:"NonWordBoundary",loc:this.loc(t)}}throw Error("Invalid Assertion Escape");case"(":let e;switch(this.consumeChar("?"),this.popChar()){case"=":e="Lookahead";break;case"!":e="NegativeLookahead"}Mi(e);const n=this.disjunction();return this.consumeChar(")"),{type:e,value:n,loc:this.loc(t)}}return wi()}quantifier(t=!1){let e;const n=this.idx;switch(this.popChar()){case"*":e={atLeast:0,atMost:1/0};break;case"+":e={atLeast:1,atMost:1/0};break;case"?":e={atLeast:0,atMost:1};break;case"{":const n=this.integerIncludingZero();switch(this.popChar()){case"}":e={atLeast:n,atMost:n};break;case",":let t;this.isDigit()?(t=this.integerIncludingZero(),e={atLeast:n,atMost:t}):e={atLeast:n,atMost:1/0},this.consumeChar("}")}if(!0===t&&void 0===e)return;Mi(e)}if(!0!==t||void 0!==e)return Mi(e)?("?"===this.peekChar(0)?(this.consumeChar("?"),e.greedy=!1):e.greedy=!0,e.type="Quantifier",e.loc=this.loc(n),e):void 0}atom(){let t;const e=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group()}return void 0===t&&this.isPatternCharacter()&&(t=this.patternCharacter()),Mi(t)?(t.loc=this.loc(e),this.isQuantifier()&&(t.quantifier=this.quantifier()),t):wi()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[xi("\n"),xi("\r"),xi("\u2028"),xi("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let t,e=!1;switch(this.popChar()){case"d":t=Fi;break;case"D":t=Fi,e=!0;break;case"s":t=ji;break;case"S":t=ji,e=!0;break;case"w":t=Di;break;case"W":t=Di,e=!0}return Mi(t)?{type:"Set",value:t,complement:e}:wi()}controlEscapeAtom(){let t;switch(this.popChar()){case"f":t=xi("\f");break;case"n":t=xi("\n");break;case"r":t=xi("\r");break;case"t":t=xi("\t");break;case"v":t=xi("\v")}return Mi(t)?{type:"Character",value:t}:wi()}controlLetterEscapeAtom(){this.consumeChar("c");const t=this.popChar();if(!1===/[a-zA-Z]/.test(t))throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:xi("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){return{type:"Character",value:xi(this.popChar())}}classPatternCharacterAtom(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:xi(this.popChar())}}}characterClass(){const t=[];let e=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),e=!0);this.isClassAtom();){const e=this.classAtom();if(e.type,Ui(e)&&this.isRangeDash()){this.consumeChar("-");const n=this.classAtom();if(n.type,Ui(n)){if(n.value<e.value)throw Error("Range out of order in character class");t.push({from:e.value,to:n.value})}else Pi(e.value,t),t.push(xi("-")),Pi(n.value,t)}else Pi(e.value,t)}return this.consumeChar("]"),{type:"Set",complement:e,value:t}}classAtom(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:xi("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let t=!0;this.consumeChar("("),"?"===this.peekChar(0)?(this.consumeChar("?"),this.consumeChar(":"),t=!1):this.groupIdx++;const e=this.disjunction();this.consumeChar(")");const n={type:"Group",capturing:t,value:e};return t&&(n.idx=this.groupIdx),n}positiveInteger(){let t=this.popChar();if(!1===$i.test(t))throw Error("Expecting a positive integer");for(;Bi.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}integerIncludingZero(){let t=this.popChar();if(!1===Bi.test(t))throw Error("Expecting an integer");for(;Bi.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}patternCharacter(){const t=this.popChar();switch(t){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:xi(t)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return"-"===this.peekChar()&&this.isClassAtom(1)}isDigit(){return Bi.test(this.peekChar(0))}isClassAtom(t=0){switch(this.peekChar(t)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}}isQuantifier(){const t=this.saveState();try{return void 0!==this.quantifier(!0)}catch(t){return!1}finally{this.restoreState(t)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(t){let e="";for(let n=0;n<t;n++){const t=this.popChar();if(!1===Gi.test(t))throw Error("Expecting a HexDecimal digits");e+=t}return{type:"Character",value:parseInt(e,16)}}peekChar(t=0){return this.input[this.idx+t]}popChar(){const t=this.peekChar(0);return this.consumeChar(void 0),t}consumeChar(t){if(void 0!==t&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(t){return{begin:t,end:this.idx}}};function Vi(t){const e=t.toString();if(Ki.hasOwnProperty(e))return Ki[e];{const t=Wi.pattern(e);return Ki[e]=t,t}}var zi="Complement Sets are not supported for first char optimization",Yi='Unable to use "first char" lexer optimizations:\n';function Xi(t,e=!1){try{const e=Vi(t);return qi(e.value,{},e.flags.ignoreCase)}catch(n){if(n.message===zi)e&&ci(`${Yi}\tUnable to optimize: < ${t.toString()} >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";e&&(n="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),ai(`${Yi}\n\tFailed parsing: < ${t.toString()} >\n\tUsing the @chevrotain/regexp-to-ast library\n\tPlease open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}function qi(t,e,n){switch(t.type){case"Disjunction":for(let r=0;r<t.value.length;r++)qi(t.value[r],e,n);break;case"Alternative":const r=t.value;for(let t=0;t<r.length;t++){const i=r[t];switch(i.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const o=i;switch(o.type){case"Character":Ji(o.value,e,n);break;case"Set":if(!0===o.complement)throw Error(zi);Or(o.value,(t=>{if("number"==typeof t)Ji(t,e,n);else{const r=t;if(!0===n)for(let t=r.from;t<=r.to;t++)Ji(t,e,n);else{for(let t=r.from;t<=r.to&&t<Eo;t++)Ji(t,e,n);if(r.to>=Eo){const t=r.from>=Eo?r.from:Eo,n=r.to,i=Ao(t),o=Ao(n);for(let t=i;t<=o;t++)e[t]=t}}}}));break;case"Group":qi(o.value,e,n);break;default:throw Error("Non Exhaustive Match")}const s=void 0!==o.quantifier&&0===o.quantifier.atLeast;if("Group"===o.type&&!1===Zi(o)||"Group"!==o.type&&!1===s)break}break;default:throw Error("non exhaustive match!")}return $r(e)}function Ji(t,e,n){const r=Ao(t);e[r]=r,!0===n&&function(t,e){const n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n){const t=Ao(r.charCodeAt(0));e[t]=t}else{const t=n.toLowerCase();if(t!==n){const n=Ao(t.charCodeAt(0));e[n]=n}}}(t,e)}function Qi(t,e){return xr(t.value,(t=>{if("number"==typeof t)return Kr(e,t);{const n=t;return void 0!==xr(e,(t=>n.from<=t&&t<=n.to))}}))}function Zi(t){const e=t.quantifier;return!(!e||0!==e.atLeast)||!!t.value&&(R(t.value)?Sr(t.value,Zi):Zi(t.value))}var to=class extends Hi{constructor(t){super(),this.targetCharCodes=t,this.found=!1}visitChildren(t){if(!0!==this.found){switch(t.type){case"Lookahead":return void this.visitLookahead(t);case"NegativeLookahead":return void this.visitNegativeLookahead(t)}super.visitChildren(t)}}visitCharacter(t){Kr(this.targetCharCodes,t.value)&&(this.found=!0)}visitSet(t){t.complement?void 0===Qi(t,this.targetCharCodes)&&(this.found=!0):void 0!==Qi(t,this.targetCharCodes)&&(this.found=!0)}};function eo(t,e){if(e instanceof RegExp){const n=Vi(e),r=new to(t);return r.visit(n),r.found}return void 0!==xr(e,(e=>Kr(t,e.charCodeAt(0))))}var no="PATTERN",ro="defaultMode",io="modes",oo="boolean"==typeof new RegExp("(?:)").sticky;var so=/[^\\][$]/,ao=/[^\\[][\^]|^\^/;function co(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function uo(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function ho(t){const e=t.PATTERN;if(qr(e))return!1;if(F(e))return!0;if(Gr(e,"exec"))return!0;if(Br(e))return!1;throw Error("non exhaustive match")}function lo(t){return!(!Br(t)||1!==t.length)&&t.charCodeAt(0)}var fo={test:function(t){const e=t.length;for(let n=this.lastIndex;n<e;n++){const e=t.charCodeAt(n);if(10===e)return this.lastIndex=n+1,!0;if(13===e)return 10===t.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function po(t,e){if(Gr(t,"LINE_BREAKS"))return!1;if(qr(t.PATTERN)){try{eo(e,t.PATTERN)}catch(t){return{issue:ko.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}if(Br(t.PATTERN))return!1;if(ho(t))return{issue:ko.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function mo(t){return Mr(t,(t=>Br(t)?t.charCodeAt(0):t))}function To(t,e,n){void 0===t[e]?t[e]=[n]:t[e].push(n)}var Eo=256,go=[];function Ao(t){return t<Eo?t:go[t]}function Io(t,e){const n=t.tokenTypeIdx;return n===e.tokenTypeIdx||!0===e.isParent&&!0===e.categoryMatchesMap[n]}function Ro(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}var vo=1,yo={};function Oo(t){const e=function(t){let e=Un(t),n=t,r=!0;for(;r;){n=Fn(Le(Mr(n,(t=>t.CATEGORIES))));const t=Ir(n,e);e=e.concat(t),Yr(t)?r=!1:n=t}return e}(t);!function(t){Or(t,(t=>{_o(t)||(yo[vo]=t,t.tokenTypeIdx=vo++),So(t)&&!R(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),So(t)||(t.CATEGORIES=[]),Gr(t,"categoryMatches")||(t.categoryMatches=[]),Gr(t,"categoryMatchesMap")||(t.categoryMatchesMap={})}))}(e),function(t){Or(t,(t=>{No([],t)}))}(e),function(t){Or(t,(t=>{t.categoryMatches=[],Or(t.categoryMatchesMap,((e,n)=>{t.categoryMatches.push(yo[n].tokenTypeIdx)}))}))}(e),Or(e,(t=>{t.isParent=t.categoryMatches.length>0}))}function No(t,e){Or(t,(t=>{e.categoryMatchesMap[t.tokenTypeIdx]=!0})),Or(e.CATEGORIES,(n=>{const r=t.concat(e);Kr(r,n)||No(r,n)}))}function _o(t){return Gr(t,"tokenTypeIdx")}function So(t){return Gr(t,"CATEGORIES")}function Lo(t){return Gr(t,"tokenTypeIdx")}var ko,Co;(Co=ko||(ko={}))[Co.MISSING_PATTERN=0]="MISSING_PATTERN",Co[Co.INVALID_PATTERN=1]="INVALID_PATTERN",Co[Co.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",Co[Co.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",Co[Co.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",Co[Co.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",Co[Co.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",Co[Co.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",Co[Co.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",Co[Co.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",Co[Co.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",Co[Co.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",Co[Co.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",Co[Co.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",Co[Co.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",Co[Co.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",Co[Co.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",Co[Co.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE";var xo={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:{buildUnableToPopLexerModeMessage:t=>`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`,buildUnexpectedCharactersMessage:(t,e,n,r,i)=>`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`},traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(xo);var Po=class{constructor(t,e=xo){if(this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(t,e)=>{if(!0===this.traceInitPerf){this.traceInitIndent++;const n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--\x3e <${t}>`);const{time:r,value:i}=ui(e),o=r>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&o(`${n}<-- <${t}> time: ${r}ms`),this.traceInitIndent--,i}return e()},"boolean"==typeof e)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=Yt({},xo,e);const n=this.config.traceInitPerf;!0===n?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof n&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(()=>{let n,r=!0;this.TRACE_INIT("Lexer Config handling",(()=>{if(this.config.lineTerminatorsPattern===xo.lineTerminatorsPattern)this.config.lineTerminatorsPattern=fo;else if(this.config.lineTerminatorCharacters===xo.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(e.safeMode&&e.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),R(t)?n={modes:{defaultMode:Un(t)},defaultMode:ro}:(r=!1,n=Un(t))})),!1===this.config.skipValidations&&(this.TRACE_INIT("performRuntimeChecks",(()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(function(t){const e=[];return Gr(t,ro)||e.push({message:"A MultiMode Lexer cannot be initialized without a <"+ro+"> property in its definition\n",type:ko.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),Gr(t,io)||e.push({message:"A MultiMode Lexer cannot be initialized without a <modes> property in its definition\n",type:ko.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),Gr(t,io)&&Gr(t,ro)&&!Gr(t.modes,t.defaultMode)&&e.push({message:`A MultiMode Lexer cannot be initialized with a ${ro}: <${t.defaultMode}>which does not exist\n`,type:ko.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),Gr(t,io)&&Or(t.modes,((t,n)=>{Or(t,((r,i)=>{if(Jr(r))e.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${n}> at index: <${i}>\n`,type:ko.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(Gr(r,"LONGER_ALT")){const i=R(r.LONGER_ALT)?r.LONGER_ALT:[r.LONGER_ALT];Or(i,(i=>{Jr(i)||Kr(t,i)||e.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${i.name}> on token <${r.name}> outside of mode <${n}>\n`,type:ko.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})}))}}))})),e}(n,this.trackStartLines,this.config.lineTerminatorCharacters))})),this.TRACE_INIT("performWarningRuntimeChecks",(()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(function(t,e,n){const r=[];let i=!1;const o=Fn(Le($r(t.modes))),s=ni(o,(t=>t[no]===Po.NA)),a=mo(n);return e&&Or(s,(t=>{const e=po(t,a);if(!1!==e){const n=function(t,e){if(e.issue===ko.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <${t.name}> Token Type\n\t Root cause: ${e.errMsg}.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===ko.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <${t.name}> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}(t,e),i={message:n,type:e.issue,tokenType:t};r.push(i)}else Gr(t,"LINE_BREAKS")?!0===t.LINE_BREAKS&&(i=!0):eo(a,t.PATTERN)&&(i=!0)})),e&&!i&&r.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:ko.NO_LINE_BREAKS_FLAGS}),r}(n,this.trackStartLines,this.config.lineTerminatorCharacters))}))),n.modes=n.modes?n.modes:{},Or(n.modes,((t,e)=>{n.modes[e]=ni(t,(t=>Jr(t)))}));const i=Vt(n.modes);if(Or(n.modes,((t,n)=>{this.TRACE_INIT(`Mode: <${n}> processing`,(()=>{if(this.modes.push(n),!1===this.config.skipValidations&&this.TRACE_INIT("validatePatterns",(()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(function(t,e){let n=[];const r=function(t){const e=kr(t,(t=>!Gr(t,no)));return{errors:Mr(e,(t=>({message:"Token Type: ->"+t.name+"<- missing static 'PATTERN' property",type:ko.MISSING_PATTERN,tokenTypes:[t]}))),valid:Ir(t,e)}}(t);n=n.concat(r.errors);const i=function(t){const e=kr(t,(t=>{const e=t[no];return!(qr(e)||F(e)||Gr(e,"exec")||Br(e))}));return{errors:Mr(e,(t=>({message:"Token Type: ->"+t.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:ko.INVALID_PATTERN,tokenTypes:[t]}))),valid:Ir(t,e)}}(r.valid),o=i.valid;return n=n.concat(i.errors),n=n.concat(function(t){let e=[];const n=kr(t,(t=>qr(t[no])));return e=e.concat(function(t){class e extends Hi{constructor(){super(...arguments),this.found=!1}visitEndAnchor(t){this.found=!0}}const n=kr(t,(t=>{const n=t.PATTERN;try{const t=Vi(n),r=new e;return r.visit(t),r.found}catch(t){return so.test(n.source)}}));return Mr(n,(t=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:ko.EOI_ANCHOR_FOUND,tokenTypes:[t]})))}(n)),e=e.concat(function(t){class e extends Hi{constructor(){super(...arguments),this.found=!1}visitStartAnchor(t){this.found=!0}}const n=kr(t,(t=>{const n=t.PATTERN;try{const t=Vi(n),r=new e;return r.visit(t),r.found}catch(t){return ao.test(n.source)}}));return Mr(n,(t=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:ko.SOI_ANCHOR_FOUND,tokenTypes:[t]})))}(n)),e=e.concat(function(t){const e=kr(t,(t=>{const e=t[no];return e instanceof RegExp&&(e.multiline||e.global)}));return Mr(e,(t=>({message:"Token Type: ->"+t.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:ko.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[t]})))}(n)),e=e.concat(function(t){const e=[];let n=Mr(t,(n=>ei(t,((t,r)=>(n.PATTERN.source!==r.PATTERN.source||Kr(e,r)||r.PATTERN===Po.NA||(e.push(r),t.push(r)),t)),[])));n=Fn(n);const r=kr(n,(t=>t.length>1));return Mr(r,(t=>{const e=Mr(t,(t=>t.name));return{message:`The same RegExp pattern ->${Pr(t).PATTERN}<-has been used in all of the following Token Types: ${e.join(", ")} <-`,type:ko.DUPLICATE_PATTERNS_FOUND,tokenTypes:t}}))}(n)),e=e.concat(function(t){const e=kr(t,(t=>t.PATTERN.test("")));return Mr(e,(t=>({message:"Token Type: ->"+t.name+"<- static 'PATTERN' must not match an empty string",type:ko.EMPTY_MATCH_PATTERN,tokenTypes:[t]})))}(n)),e}(o)),n=n.concat(function(t){const e=kr(t,(t=>{if(!Gr(t,"GROUP"))return!1;const e=t.GROUP;return e!==Po.SKIPPED&&e!==Po.NA&&!Br(e)}));return Mr(e,(t=>({message:"Token Type: ->"+t.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:ko.INVALID_GROUP_TYPE_FOUND,tokenTypes:[t]})))}(o)),n=n.concat(function(t,e){const n=kr(t,(t=>void 0!==t.PUSH_MODE&&!Kr(e,t.PUSH_MODE)));return Mr(n,(t=>({message:`Token Type: ->${t.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${t.PUSH_MODE}<-which does not exist`,type:ko.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[t]})))}(o,e)),n=n.concat(function(t){const e=[],n=ei(t,((t,e,n)=>{const r=e.PATTERN;return r===Po.NA||(Br(r)?t.push({str:r,idx:n,tokenType:e}):qr(r)&&(i=r,void 0===xr([".","\\","[","]","|","^","$","(",")","?","*","+","{"],(t=>-1!==i.source.indexOf(t))))&&t.push({str:r.source,idx:n,tokenType:e})),t;var i}),[]);return Or(t,((t,r)=>{Or(n,(({str:n,idx:i,tokenType:o})=>{if(r<i&&function(t,e){if(qr(e)){const n=e.exec(t);return null!==n&&0===n.index}if(F(e))return e(t,0,[],{});if(Gr(e,"exec"))return e.exec(t,0,[],{});if("string"==typeof e)return e===t;throw Error("non exhaustive match")}(n,t.PATTERN)){const n=`Token: ->${o.name}<- can never be matched.\nBecause it appears AFTER the Token Type ->${t.name}<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:n,type:ko.UNREACHABLE_PATTERN,tokenTypes:[t,o]})}}))})),e}(o)),n}(t,i))})),Yr(this.lexerDefinitionErrors)){let r;Oo(t),this.TRACE_INIT("analyzeTokenTypes",(()=>{r=function(t,e){const n=(e=Er(e,{useSticky:oo,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:(t,e)=>e()})).tracer;let r;n("initCharCodeToOptimizedIndexMap",(()=>{!function(){if(Yr(go)){go=new Array(65536);for(let t=0;t<65536;t++)go[t]=t>255?255+~~(t/255):t}}()})),n("Reject Lexer.NA",(()=>{r=ni(t,(t=>t[no]===Po.NA))}));let i,o,s,a,c,u,h,l,d,f,p,m=!1;n("Transform Patterns",(()=>{m=!1,i=Mr(r,(t=>{const n=t[no];if(qr(n)){const t=n.source;return 1!==t.length||"^"===t||"$"===t||"."===t||n.ignoreCase?2!==t.length||"\\"!==t[0]||Kr(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],t[1])?e.useSticky?uo(n):co(n):t[1]:t}if(F(n))return m=!0,{exec:n};if("object"==typeof n)return m=!0,n;if("string"==typeof n){if(1===n.length)return n;{const t=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),r=new RegExp(t);return e.useSticky?uo(r):co(r)}}throw Error("non exhaustive match")}))})),n("misc mapping",(()=>{o=Mr(r,(t=>t.tokenTypeIdx)),s=Mr(r,(t=>{const e=t.GROUP;if(e!==Po.SKIPPED){if(Br(e))return e;if(Jr(e))return!1;throw Error("non exhaustive match")}})),a=Mr(r,(t=>{const e=t.LONGER_ALT;if(e)return R(e)?Mr(e,(t=>Vr(r,t))):[Vr(r,e)]})),c=Mr(r,(t=>t.PUSH_MODE)),u=Mr(r,(t=>Gr(t,"POP_MODE")))})),n("Line Terminator Handling",(()=>{const t=mo(e.lineTerminatorCharacters);h=Mr(r,(t=>!1)),"onlyOffset"!==e.positionTracking&&(h=Mr(r,(e=>Gr(e,"LINE_BREAKS")?!!e.LINE_BREAKS:!1===po(e,t)&&eo(t,e.PATTERN))))})),n("Misc Mapping #2",(()=>{l=Mr(r,ho),d=Mr(i,lo),f=ei(r,((t,e)=>{const n=e.GROUP;return Br(n)&&n!==Po.SKIPPED&&(t[n]=[]),t}),{}),p=Mr(i,((t,e)=>({pattern:i[e],longerAlt:a[e],canLineTerminator:h[e],isCustom:l[e],short:d[e],group:s[e],push:c[e],pop:u[e],tokenTypeIdx:o[e],tokenType:r[e]})))}));let T=!0,E=[];return e.safeMode||n("First Char Optimization",(()=>{E=ei(r,((t,n,r)=>{if("string"==typeof n.PATTERN){const e=Ao(n.PATTERN.charCodeAt(0));To(t,e,p[r])}else if(R(n.START_CHARS_HINT)){let e;Or(n.START_CHARS_HINT,(n=>{const i=Ao("string"==typeof n?n.charCodeAt(0):n);e!==i&&(e=i,To(t,i,p[r]))}))}else if(qr(n.PATTERN))if(n.PATTERN.unicode)T=!1,e.ensureOptimizations&&ai(`${Yi}\tUnable to analyze < ${n.PATTERN.toString()} > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const i=Xi(n.PATTERN,e.ensureOptimizations);Yr(i)&&(T=!1),Or(i,(e=>{To(t,e,p[r])}))}else e.ensureOptimizations&&ai(`${Yi}\tTokenType: <${n.name}> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),T=!1;return t}),[])})),{emptyGroups:f,patternIdxToConfig:p,charCodeToPatternIdxToConfig:E,hasCustom:m,canBeOptimized:T}}(t,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:e.positionTracking,ensureOptimizations:e.ensureOptimizations,safeMode:e.safeMode,tracer:this.TRACE_INIT})})),this.patternIdxToConfig[n]=r.patternIdxToConfig,this.charCodeToPatternIdxToConfig[n]=r.charCodeToPatternIdxToConfig,this.emptyGroups=Yt({},this.emptyGroups,r.emptyGroups),this.hasCustom=r.hasCustom||this.hasCustom,this.canModeBeOptimized[n]=r.canBeOptimized}}))})),this.defaultMode=n.defaultMode,!Yr(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const t=Mr(this.lexerDefinitionErrors,(t=>t.message)).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+t)}Or(this.lexerDefinitionWarning,(t=>{ci(t.message)})),this.TRACE_INIT("Choosing sub-methods implementations",(()=>{if(oo?(this.chopInput=U,this.match=this.matchWithTest):(this.updateLastIndex=Z,this.match=this.matchWithExec),r&&(this.handleModes=Z),!1===this.trackStartLines&&(this.computeNewColumn=U),!1===this.trackEndLines&&(this.updateTokenEndLineColumnLocation=Z),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else{if(!/onlyOffset/i.test(this.config.positionTracking))throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.createTokenInstance=this.createOffsetOnlyToken}this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)})),this.TRACE_INIT("Failed Optimization Warnings",(()=>{const t=ei(this.canModeBeOptimized,((t,e,n)=>(!1===e&&t.push(n),t)),[]);if(e.ensureOptimizations&&!Yr(t))throw Error(`Lexer Modes: < ${t.join(", ")} > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.`)})),this.TRACE_INIT("clearRegExpParserCache",(()=>{Ki={}})),this.TRACE_INIT("toFastProperties",(()=>{hi(this)}))}))}tokenize(t,e=this.defaultMode){if(!Yr(this.lexerDefinitionErrors)){const t=Mr(this.lexerDefinitionErrors,(t=>t.message)).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+t)}return this.tokenizeInternal(t,e)}tokenizeInternal(t,e){let n,r,i,o,s,a,c,u,h,l,d,f,p,m,T;const E=t,g=E.length;let A=0,I=0;const v=this.hasCustom?0:Math.floor(t.length/10),y=new Array(v),O=[];let N=this.trackStartLines?1:void 0,_=this.trackStartLines?1:void 0;const S=function(t){const e={},n=Vt(t);return Or(n,(n=>{const r=t[n];if(!R(r))throw Error("non exhaustive match");e[n]=[]})),e}(this.emptyGroups),L=this.trackStartLines,k=this.config.lineTerminatorsPattern;let C=0,x=[],P=[];const b=[],M=[];let w;function U(){return x}function F(t){const e=Ao(t),n=P[e];return void 0===n?M:n}Object.freeze(M);const D=t=>{if(1===b.length&&void 0===t.tokenType.PUSH_MODE){const e=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(t);O.push({offset:t.startOffset,line:t.startLine,column:t.startColumn,length:t.image.length,message:e})}else{b.pop();const t=Rr(b);x=this.patternIdxToConfig[t],P=this.charCodeToPatternIdxToConfig[t],C=x.length;const e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;w=P&&e?F:U}};function j(t){b.push(t),P=this.charCodeToPatternIdxToConfig[t],x=this.patternIdxToConfig[t],C=x.length,C=x.length;const e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;w=P&&e?F:U}let G;j.call(this,e);const B=this.config.recoveryEnabled;for(;A<g;){a=null;const e=E.charCodeAt(A),R=w(e),v=R.length;for(n=0;n<v;n++){G=R[n];const r=G.pattern;c=null;const h=G.short;if(!1!==h?e===h&&(a=r):!0===G.isCustom?(T=r.exec(E,A,y,S),null!==T?(a=T[0],void 0!==T.payload&&(c=T.payload)):a=null):(this.updateLastIndex(r,A),a=this.match(r,t,A)),null!==a){if(s=G.longerAlt,void 0!==s){const e=s.length;for(i=0;i<e;i++){const e=x[s[i]],n=e.pattern;if(u=null,!0===e.isCustom?(T=n.exec(E,A,y,S),null!==T?(o=T[0],void 0!==T.payload&&(u=T.payload)):o=null):(this.updateLastIndex(n,A),o=this.match(n,t,A)),o&&o.length>a.length){a=o,c=u,G=e;break}}}break}}if(null!==a){if(h=a.length,l=G.group,void 0!==l&&(d=G.tokenTypeIdx,f=this.createTokenInstance(a,A,d,G.tokenType,N,_,h),this.handlePayload(f,c),!1===l?I=this.addToken(y,I,f):S[l].push(f)),t=this.chopInput(t,h),A+=h,_=this.computeNewColumn(_,h),!0===L&&!0===G.canLineTerminator){let t,e,n=0;k.lastIndex=0;do{t=k.test(a),!0===t&&(e=k.lastIndex-1,n++)}while(!0===t);0!==n&&(N+=n,_=h-e,this.updateTokenEndLineColumnLocation(f,l,e,n,N,_,h))}this.handleModes(G,D,j,f)}else{const e=A,n=N,i=_;let o=!1===B;for(;!1===o&&A<g;)for(t=this.chopInput(t,1),A++,r=0;r<C;r++){const e=x[r],n=e.pattern,i=e.short;if(!1!==i?E.charCodeAt(A)===i&&(o=!0):!0===e.isCustom?o=null!==n.exec(E,A,y,S):(this.updateLastIndex(n,A),o=null!==n.exec(t)),!0===o)break}if(p=A-e,_=this.computeNewColumn(_,p),m=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(E,e,p,n,i),O.push({offset:e,line:n,column:i,length:p,message:m}),!1===B)break}}return this.hasCustom||(y.length=I),{tokens:y,groups:S,errors:O}}handleModes(t,e,n,r){if(!0===t.pop){const i=t.push;e(r),void 0!==i&&n.call(this,i)}else void 0!==t.push&&n.call(this,t.push)}chopInput(t,e){return t.substring(e)}updateLastIndex(t,e){t.lastIndex=e}updateTokenEndLineColumnLocation(t,e,n,r,i,o,s){let a,c;void 0!==e&&(a=n===s-1,c=a?-1:0,1===r&&!0===a||(t.endLine=i+c,t.endColumn=o-1-c))}computeNewColumn(t,e){return t+e}createOffsetOnlyToken(t,e,n,r){return{image:t,startOffset:e,tokenTypeIdx:n,tokenType:r}}createStartOnlyToken(t,e,n,r,i,o){return{image:t,startOffset:e,startLine:i,startColumn:o,tokenTypeIdx:n,tokenType:r}}createFullToken(t,e,n,r,i,o,s){return{image:t,startOffset:e,endOffset:e+s-1,startLine:i,endLine:i,startColumn:o,endColumn:o+s-1,tokenTypeIdx:n,tokenType:r}}addTokenUsingPush(t,e,n){return t.push(n),e}addTokenUsingMemberAccess(t,e,n){return t[e]=n,++e}handlePayloadNoCustom(t,e){}handlePayloadWithCustom(t,e){null!==e&&(t.payload=e)}matchWithTest(t,e,n){return!0===t.test(e)?e.substring(n,t.lastIndex):null}matchWithExec(t,e){const n=t.exec(e);return null!==n?n[0]:null}};function bo(t){return Mo(t)?t.LABEL:t.name}function Mo(t){return Br(t.LABEL)&&""!==t.LABEL}Po.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",Po.NA=/NOT_APPLICABLE/;var wo="parent",Uo="categories",Fo="label",Do="group",jo="push_mode",Go="pop_mode",Bo="longer_alt",$o="line_breaks",Ho="start_chars_hint";function Ko(t){return function(t){const e=t.pattern,n={};if(n.name=t.name,Jr(e)||(n.PATTERN=e),Gr(t,wo))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";return Gr(t,Uo)&&(n.CATEGORIES=t[Uo]),Oo([n]),Gr(t,Fo)&&(n.LABEL=t[Fo]),Gr(t,Do)&&(n.GROUP=t[Do]),Gr(t,Go)&&(n.POP_MODE=t[Go]),Gr(t,jo)&&(n.PUSH_MODE=t[jo]),Gr(t,Bo)&&(n.LONGER_ALT=t[Bo]),Gr(t,$o)&&(n.LINE_BREAKS=t[$o]),Gr(t,Ho)&&(n.START_CHARS_HINT=t[Ho]),n}(t)}var Wo=Ko({name:"EOF",pattern:Po.NA});function Vo(t,e,n,r,i,o,s,a){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:o,startColumn:s,endColumn:a,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}Oo([Wo]);var zo={buildMismatchTokenMessage:({expected:t,actual:e,previous:n,ruleName:r})=>`Expecting ${Mo(t)?`--\x3e ${bo(t)} <--`:`token of type --\x3e ${t.name} <--`} but found --\x3e '${e.image}' <--`,buildNotAllInputParsedMessage:({firstRedundant:t,ruleName:e})=>"Redundant input, expecting EOF but found: "+t.image,buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:r,ruleName:i}){const o="Expecting: ",s="\nbut found: '"+Pr(e).image+"'";if(r)return o+r+s;{const e=ei(t,((t,e)=>t.concat(e)),[]),n=Mr(e,(t=>`[${Mr(t,(t=>bo(t))).join(", ")}]`));return o+`one of these possible Token sequences:\n${Mr(n,((t,e)=>`  ${e+1}. ${t}`)).join("\n")}`+s}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:r}){const i="Expecting: ",o="\nbut found: '"+Pr(e).image+"'";return n?i+n+o:i+`expecting at least one iteration which starts with one of these possible Token sequences::\n  <${Mr(t,(t=>`[${Mr(t,(t=>bo(t))).join(",")}]`)).join(" ,")}>`+o}};Object.freeze(zo);var Yo,Xo,qo={buildRuleNotFoundError:(t,e)=>"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+"<-\ninside top level rule: ->"+t.name+"<-"},Jo={buildDuplicateFoundError(t,e){const n=t.name,r=Pr(e),i=r.idx,o=Ni(r),s=(a=r)instanceof Ri?a.terminalType.name:a instanceof di?a.nonTerminalName:"";var a;let c=`->${o}${i>0?i:""}<- ${s?`with argument: ->${s}<-`:""}\n                  appears more than once (${e.length} times) in the top level rule: ->${n}<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  `;return c=c.replace(/[ \t]+/g," "),c=c.replace(/\s\s+/g,"\n"),c},buildNamespaceConflictError:t=>`Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter.`,buildAlternationPrefixAmbiguityError(t){const e=Mr(t.prefixPath,(t=>bo(t))).join(", "),n=0===t.alternation.idx?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix\nin <OR${n}> inside <${t.topLevelRule.name}> Rule,\n<${e}> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details.`},buildAlternationAmbiguityError(t){const e=Mr(t.prefixPath,(t=>bo(t))).join(", "),n=0===t.alternation.idx?"":t.alternation.idx;let r=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${t.topLevelRule.name}> Rule,\n<${e}> may appears as a prefix path in all these alternatives.\n`;return r+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",r},buildEmptyRepetitionError(t){let e=Ni(t.repetition);return 0!==t.repetition.idx&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.\nThis could lead to an infinite loop.`},buildTokenNameError:t=>"deprecated",buildEmptyAlternationError:t=>`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.\nOnly the last alternative may be an empty alternative.`,buildTooManyAlternativesError:t=>`An Alternation cannot have more than 256 alternatives:\n<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.\n has ${t.alternation.definition.length+1} alternatives.`,buildLeftRecursionError(t){const e=t.topLevelRule.name;return`Left Recursion found in grammar.\nrule: <${e}> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n ${e} --\x3e ${Mr(t.leftRecursionPath,(t=>t.name)).concat([e]).join(" --\x3e ")}\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError:t=>"deprecated",buildDuplicateRuleNameError(t){let e;return e=t.topLevelRule instanceof fi?t.topLevelRule.name:t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}},Qo=class extends yi{constructor(t,e){super(),this.nameToTopRule=t,this.errMsgProvider=e,this.errors=[]}resolveRefs(){Or($r(this.nameToTopRule),(t=>{this.currTopLevel=t,t.accept(this)}))}visitNonTerminal(t){const e=this.nameToTopRule[t.nonTerminalName];if(e)t.referencedRule=e;else{const e=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:e,type:fa.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}}},Zo=class extends _i{constructor(t,e){super(),this.topProd=t,this.path=e,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Un(this.path.ruleStack).reverse(),this.occurrenceStack=Un(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(t,e=[]){this.found||super.walk(t,e)}walkProdRef(t,e,n){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){const r=e.concat(n);this.updateExpectedNext(),this.walk(t.referencedRule,r)}}updateExpectedNext(){Yr(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},ts=class extends Zo{constructor(t,e){super(t,e),this.path=e,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(t,e,n){if(this.isAtEndOfPath&&t.terminalType.name===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){const t=e.concat(n),r=new pi({definition:t});this.possibleTokTypes=Li(r),this.found=!0}}},es=class extends _i{constructor(t,e){super(),this.topRule=t,this.occurrence=e,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},ns=class extends es{walkMany(t,e,n){if(t.idx===this.occurrence){const t=Pr(e.concat(n));this.result.isEndOfRule=void 0===t,t instanceof Ri&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkMany(t,e,n)}},rs=class extends es{walkManySep(t,e,n){if(t.idx===this.occurrence){const t=Pr(e.concat(n));this.result.isEndOfRule=void 0===t,t instanceof Ri&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkManySep(t,e,n)}},is=class extends es{walkAtLeastOne(t,e,n){if(t.idx===this.occurrence){const t=Pr(e.concat(n));this.result.isEndOfRule=void 0===t,t instanceof Ri&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkAtLeastOne(t,e,n)}},os=class extends es{walkAtLeastOneSep(t,e,n){if(t.idx===this.occurrence){const t=Pr(e.concat(n));this.result.isEndOfRule=void 0===t,t instanceof Ri&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkAtLeastOneSep(t,e,n)}};function ss(t,e,n=[]){n=Un(n);let r=[],i=0;function o(o){const s=ss(o.concat(vr(t,i+1)),e,n);return r.concat(s)}for(;n.length<e&&i<t.length;){const e=t[i];if(e instanceof pi)return o(e.definition);if(e instanceof di)return o(e.definition);if(e instanceof mi)r=o(e.definition);else{if(e instanceof Ti)return o(e.definition.concat([new gi({definition:e.definition})]));if(e instanceof Ei)return o([new pi({definition:e.definition}),new gi({definition:[new Ri({terminalType:e.separator})].concat(e.definition)})]);if(e instanceof Ai){const t=e.definition.concat([new gi({definition:[new Ri({terminalType:e.separator})].concat(e.definition)})]);r=o(t)}else if(e instanceof gi){const t=e.definition.concat([new gi({definition:e.definition})]);r=o(t)}else{if(e instanceof Ii)return Or(e.definition,(t=>{!1===Yr(t.definition)&&(r=o(t.definition))})),r;if(!(e instanceof Ri))throw Error("non exhaustive match");n.push(e.terminalType)}}i++}return r.push({partialPath:n,suffixDef:vr(t,i)}),r}function as(t,e,n,r){const i="EXIT_NONE_TERMINAL",o=[i],s="EXIT_ALTERNATIVE";let a=!1;const c=e.length,u=c-r-1,h=[],l=[];for(l.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!Yr(l);){const t=l.pop();if(t===s){a&&Rr(l).idx<=u&&l.pop();continue}const r=t.def,d=t.idx,f=t.ruleStack,p=t.occurrenceStack;if(Yr(r))continue;const m=r[0];if(m===i){const t={idx:d,def:vr(r),ruleStack:yr(f),occurrenceStack:yr(p)};l.push(t)}else if(m instanceof Ri)if(d<c-1){const t=d+1;if(n(e[t],m.terminalType)){const e={idx:t,def:vr(r),ruleStack:f,occurrenceStack:p};l.push(e)}}else{if(d!==c-1)throw Error("non exhaustive match");h.push({nextTokenType:m.terminalType,nextTokenOccurrence:m.idx,ruleStack:f,occurrenceStack:p}),a=!0}else if(m instanceof di){const t=Un(f);t.push(m.nonTerminalName);const e=Un(p);e.push(m.idx);const n={idx:d,def:m.definition.concat(o,vr(r)),ruleStack:t,occurrenceStack:e};l.push(n)}else if(m instanceof mi){const t={idx:d,def:vr(r),ruleStack:f,occurrenceStack:p};l.push(t),l.push(s);const e={idx:d,def:m.definition.concat(vr(r)),ruleStack:f,occurrenceStack:p};l.push(e)}else if(m instanceof Ti){const t=new gi({definition:m.definition,idx:m.idx}),e={idx:d,def:m.definition.concat([t],vr(r)),ruleStack:f,occurrenceStack:p};l.push(e)}else if(m instanceof Ei){const t=new Ri({terminalType:m.separator}),e=new gi({definition:[t].concat(m.definition),idx:m.idx}),n={idx:d,def:m.definition.concat([e],vr(r)),ruleStack:f,occurrenceStack:p};l.push(n)}else if(m instanceof Ai){const t={idx:d,def:vr(r),ruleStack:f,occurrenceStack:p};l.push(t),l.push(s);const e=new Ri({terminalType:m.separator}),n=new gi({definition:[e].concat(m.definition),idx:m.idx}),i={idx:d,def:m.definition.concat([n],vr(r)),ruleStack:f,occurrenceStack:p};l.push(i)}else if(m instanceof gi){const t={idx:d,def:vr(r),ruleStack:f,occurrenceStack:p};l.push(t),l.push(s);const e=new gi({definition:m.definition,idx:m.idx}),n={idx:d,def:m.definition.concat([e],vr(r)),ruleStack:f,occurrenceStack:p};l.push(n)}else if(m instanceof Ii)for(let t=m.definition.length-1;t>=0;t--){const e={idx:d,def:m.definition[t].definition.concat(vr(r)),ruleStack:f,occurrenceStack:p};l.push(e),l.push(s)}else if(m instanceof pi)l.push({idx:d,def:m.definition.concat(vr(r)),ruleStack:f,occurrenceStack:p});else{if(!(m instanceof fi))throw Error("non exhaustive match");l.push(cs(m,d,f,p))}}return h}function cs(t,e,n,r){const i=Un(n);i.push(t.name);const o=Un(r);return o.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:o}}function us(t){if(t instanceof mi||"Option"===t)return Yo.OPTION;if(t instanceof gi||"Repetition"===t)return Yo.REPETITION;if(t instanceof Ti||"RepetitionMandatory"===t)return Yo.REPETITION_MANDATORY;if(t instanceof Ei||"RepetitionMandatoryWithSeparator"===t)return Yo.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof Ai||"RepetitionWithSeparator"===t)return Yo.REPETITION_WITH_SEPARATOR;if(t instanceof Ii||"Alternation"===t)return Yo.ALTERNATION;throw Error("non exhaustive match")}function hs(t,e,n,r){const i=t.length,o=Sr(t,(t=>Sr(t,(t=>1===t.length))));if(e)return function(e){const r=Mr(e,(t=>t.GATE));for(let e=0;e<i;e++){const i=t[e],o=i.length,s=r[e];if(void 0===s||!1!==s.call(this))t:for(let t=0;t<o;t++){const r=i[t],o=r.length;for(let t=0;t<o;t++){const e=this.LA(t+1);if(!1===n(e,r[t]))continue t}return e}}};if(o&&!r){const e=Mr(t,(t=>Le(t))),n=ei(e,((t,e,n)=>(Or(e,(e=>{Gr(t,e.tokenTypeIdx)||(t[e.tokenTypeIdx]=n),Or(e.categoryMatches,(e=>{Gr(t,e)||(t[e]=n)}))})),t)),{});return function(){const t=this.LA(1);return n[t.tokenTypeIdx]}}return function(){for(let e=0;e<i;e++){const r=t[e],i=r.length;t:for(let t=0;t<i;t++){const i=r[t],o=i.length;for(let t=0;t<o;t++){const e=this.LA(t+1);if(!1===n(e,i[t]))continue t}return e}}}}function ls(t,e,n){const r=Sr(t,(t=>1===t.length)),i=t.length;if(r&&!n){const e=Le(t);if(1===e.length&&Yr(e[0].categoryMatches)){const t=e[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===t}}{const t=ei(e,((t,e,n)=>(t[e.tokenTypeIdx]=!0,Or(e.categoryMatches,(e=>{t[e]=!0})),t)),[]);return function(){const e=this.LA(1);return!0===t[e.tokenTypeIdx]}}}return function(){t:for(let n=0;n<i;n++){const r=t[n],i=r.length;for(let t=0;t<i;t++){const n=this.LA(t+1);if(!1===e(n,r[t]))continue t}return!0}return!1}}(Xo=Yo||(Yo={}))[Xo.OPTION=0]="OPTION",Xo[Xo.REPETITION=1]="REPETITION",Xo[Xo.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",Xo[Xo.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",Xo[Xo.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",Xo[Xo.ALTERNATION=5]="ALTERNATION";var ds=class extends _i{constructor(t,e,n){super(),this.topProd=t,this.targetOccurrence=e,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(t,e,n,r){return t.idx===this.targetOccurrence&&this.targetProdType===e&&(this.restDef=n.concat(r),!0)}walkOption(t,e,n){this.checkIsTarget(t,Yo.OPTION,e,n)||super.walkOption(t,e,n)}walkAtLeastOne(t,e,n){this.checkIsTarget(t,Yo.REPETITION_MANDATORY,e,n)||super.walkOption(t,e,n)}walkAtLeastOneSep(t,e,n){this.checkIsTarget(t,Yo.REPETITION_MANDATORY_WITH_SEPARATOR,e,n)||super.walkOption(t,e,n)}walkMany(t,e,n){this.checkIsTarget(t,Yo.REPETITION,e,n)||super.walkOption(t,e,n)}walkManySep(t,e,n){this.checkIsTarget(t,Yo.REPETITION_WITH_SEPARATOR,e,n)||super.walkOption(t,e,n)}},fs=class extends yi{constructor(t,e,n){super(),this.targetOccurrence=t,this.targetProdType=e,this.targetRef=n,this.result=[]}checkIsTarget(t,e){t.idx!==this.targetOccurrence||this.targetProdType!==e||void 0!==this.targetRef&&t!==this.targetRef||(this.result=t.definition)}visitOption(t){this.checkIsTarget(t,Yo.OPTION)}visitRepetition(t){this.checkIsTarget(t,Yo.REPETITION)}visitRepetitionMandatory(t){this.checkIsTarget(t,Yo.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(t){this.checkIsTarget(t,Yo.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(t){this.checkIsTarget(t,Yo.REPETITION_WITH_SEPARATOR)}visitAlternation(t){this.checkIsTarget(t,Yo.ALTERNATION)}};function ps(t){const e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}function ms(t){let e=[""];for(let n=0;n<t.length;n++){const r=t[n],i=[];for(let t=0;t<e.length;t++){const n=e[t];i.push(n+"_"+r.tokenTypeIdx);for(let t=0;t<r.categoryMatches.length;t++){const e="_"+r.categoryMatches[t];i.push(n+e)}}e=i}return e}function Ts(t,e,n){for(let r=0;r<t.length;r++){if(r===n)continue;const i=t[r];for(let t=0;t<e.length;t++)if(!0===i[e[t]])return!1}return!0}function Es(t,e){const n=Mr(t,(t=>ss([t],1))),r=ps(n.length),i=Mr(n,(t=>{const e={};return Or(t,(t=>{const n=ms(t.partialPath);Or(n,(t=>{e[t]=!0}))})),e}));let o=n;for(let t=1;t<=e;t++){const n=o;o=ps(n.length);for(let s=0;s<n.length;s++){const a=n[s];for(let n=0;n<a.length;n++){const c=a[n].partialPath,u=a[n].suffixDef,h=ms(c);if(Ts(i,h,s)||Yr(u)||c.length===e){const t=r[s];if(!1===Is(t,c)){t.push(c);for(let t=0;t<h.length;t++){const e=h[t];i[s][e]=!0}}}else{const e=ss(u,t+1,c);o[s]=o[s].concat(e),Or(e,(t=>{const e=ms(t.partialPath);Or(e,(t=>{i[s][t]=!0}))}))}}}}return r}function gs(t,e,n,r){const i=new fs(t,Yo.ALTERNATION,r);return e.accept(i),Es(i.result,n)}function As(t,e,n,r){const i=new fs(t,n);e.accept(i);const o=i.result,s=new ds(e,t,n).startWalking();return Es([new pi({definition:o}),new pi({definition:s})],r)}function Is(t,e){t:for(let n=0;n<t.length;n++){const r=t[n];if(r.length===e.length){for(let t=0;t<r.length;t++){const n=e[t],i=r[t];if(!1==(n===i||void 0!==i.categoryMatchesMap[n.tokenTypeIdx]))continue t}return!0}}return!1}function Rs(t){return Sr(t,(t=>Sr(t,(t=>Sr(t,(t=>Yr(t.categoryMatches)))))))}function vs(t){return`${Ni(t)}_#_${t.idx}_#_${ys(t)}`}function ys(t){return t instanceof Ri?t.terminalType.name:t instanceof di?t.nonTerminalName:""}var Os=class extends yi{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(t){this.allProductions.push(t)}visitOption(t){this.allProductions.push(t)}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}visitAlternation(t){this.allProductions.push(t)}visitTerminal(t){this.allProductions.push(t)}};function Ns(t,e,n,r=[]){const i=[],o=_s(e.definition);if(Yr(o))return[];{const e=t.name;Kr(o,t)&&i.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:fa.LEFT_RECURSION,ruleName:e});const s=Ir(o,r.concat([t])),a=wr(s,(e=>{const i=Un(r);return i.push(e),Ns(t,e,n,i)}));return i.concat(a)}}function _s(t){let e=[];if(Yr(t))return e;const n=Pr(t);if(n instanceof di)e.push(n.referencedRule);else if(n instanceof pi||n instanceof mi||n instanceof Ti||n instanceof Ei||n instanceof Ai||n instanceof gi)e=e.concat(_s(n.definition));else if(n instanceof Ii)e=Le(Mr(n.definition,(t=>_s(t.definition))));else if(!(n instanceof Ri))throw Error("non exhaustive match");const r=Oi(n),i=t.length>1;if(r&&i){const n=vr(t);return e.concat(_s(n))}return e}var Ss=class extends yi{constructor(){super(...arguments),this.alternations=[]}visitAlternation(t){this.alternations.push(t)}};var Ls=class extends yi{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}};var ks="MismatchedTokenException",Cs="NoViableAltException",xs="EarlyExitException",Ps="NotAllInputParsedException",bs=[ks,Cs,xs,Ps];function Ms(t){return Kr(bs,t.name)}Object.freeze(bs);var ws=class extends Error{constructor(t,e){super(t),this.token=e,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Us=class extends ws{constructor(t,e,n){super(t,e),this.previousToken=n,this.name=ks}},Fs=class extends ws{constructor(t,e,n){super(t,e),this.previousToken=n,this.name=Cs}},Ds=class extends ws{constructor(t,e){super(t,e),this.name=Ps}},js=class extends ws{constructor(t,e,n){super(t,e),this.previousToken=n,this.name=xs}},Gs={},Bs="InRuleRecoveryException",$s=class extends Error{constructor(t){super(t),this.name=Bs}};function Hs(t,e,n,r,i,o,s){const a=this.getKeyForAutomaticLookahead(r,i);let c=this.firstAfterRepMap[a];if(void 0===c){const t=this.getCurrRuleFullName();c=new o(this.getGAstProductions()[t],i).startWalking(),this.firstAfterRepMap[a]=c}let u=c.token,h=c.occurrence;const l=c.isEndOfRule;1===this.RULE_STACK.length&&l&&void 0===u&&(u=Wo,h=1),void 0!==u&&void 0!==h&&this.shouldInRepetitionRecoveryBeTried(u,h,s)&&this.tryInRepetitionRecovery(t,e,n,u)}var Ks=1024,Ws=1280,Vs=1536;function zs(t,e,n){return n|e|t}var Ys,Xs,qs=class{constructor(t){var e;this.maxLookahead=null!==(e=null==t?void 0:t.maxLookahead)&&void 0!==e?e:ma.maxLookahead}validate(t){const e=this.validateNoLeftRecursion(t.rules);if(Yr(e)){const n=this.validateEmptyOrAlternatives(t.rules),r=this.validateAmbiguousAlternationAlternatives(t.rules,this.maxLookahead),i=this.validateSomeNonEmptyLookaheadPath(t.rules,this.maxLookahead);return[...e,...n,...r,...i]}return e}validateNoLeftRecursion(t){return wr(t,(t=>Ns(t,t,Jo)))}validateEmptyOrAlternatives(t){return wr(t,(t=>function(t,e){const n=new Ss;t.accept(n);const r=n.alternations;return wr(r,(n=>{const r=yr(n.definition);return wr(r,((r,i)=>{const o=as([r],[],Io,1);return Yr(o)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:n,emptyChoiceIdx:i}),type:fa.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:n.idx,alternative:i+1}]:[]}))}))}(t,Jo)))}validateAmbiguousAlternationAlternatives(t,e){return wr(t,(t=>function(t,e,n){const r=new Ss;t.accept(r);let i=r.alternations;i=ni(i,(t=>!0===t.ignoreAmbiguities));const o=wr(i,(r=>{const i=r.idx,o=r.maxLookahead||e,s=gs(i,t,o,r),a=function(t,e,n,r){const i=[],o=ei(t,((n,r,o)=>(!0===e.definition[o].ignoreAmbiguities||Or(r,(r=>{const s=[o];Or(t,((t,n)=>{o!==n&&Is(t,r)&&!0!==e.definition[n].ignoreAmbiguities&&s.push(n)})),s.length>1&&!Is(i,r)&&(i.push(r),n.push({alts:s,path:r}))})),n)),[]);return Mr(o,(t=>{const i=Mr(t.alts,(t=>t+1));return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:i,prefixPath:t.path}),type:fa.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:t.alts}}))}(s,r,t,n),c=function(t,e,n,r){const i=ei(t,((t,e,n)=>{const r=Mr(e,(t=>({idx:n,path:t})));return t.concat(r)}),[]);return Fn(wr(i,(t=>{if(!0===e.definition[t.idx].ignoreAmbiguities)return[];const o=t.idx,s=t.path,a=kr(i,(t=>{return!0!==e.definition[t.idx].ignoreAmbiguities&&t.idx<o&&(n=t.path,r=s,n.length<r.length&&Sr(n,((t,e)=>{const n=r[e];return t===n||n.categoryMatchesMap[t.tokenTypeIdx]})));var n,r}));return Mr(a,(t=>{const i=[t.idx+1,o+1],s=0===e.idx?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:i,prefixPath:t.path}),type:fa.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:s,alternatives:i}}))})))}(s,r,t,n);return a.concat(c)}));return o}(t,e,Jo)))}validateSomeNonEmptyLookaheadPath(t,e){return function(t,e,n){const r=[];return Or(t,(t=>{const i=new Ls;t.accept(i);const o=i.allProductions;Or(o,(i=>{const o=us(i),s=i.maxLookahead||e,a=As(i.idx,t,o,s)[0];if(Yr(Le(a))){const e=n.buildEmptyRepetitionError({topLevelRule:t,repetition:i});r.push({message:e,type:fa.NO_NON_EMPTY_LOOKAHEAD,ruleName:t.name})}}))})),r}(t,e,Jo)}buildLookaheadForAlternation(t){return function(t,e,n,r,i,o){const s=gs(t,e,n);return o(s,r,Rs(s)?Ro:Io,i)}(t.prodOccurrence,t.rule,t.maxLookahead,t.hasPredicates,t.dynamicTokensEnabled,hs)}buildLookaheadForOptional(t){return function(t,e,n,r,i,o){const s=As(t,e,i,n),a=Rs(s)?Ro:Io;return o(s[0],a,r)}(t.prodOccurrence,t.rule,t.maxLookahead,t.dynamicTokensEnabled,us(t.prodType),ls)}},Js=new class extends yi{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(t){this.dslMethods.option.push(t)}visitRepetitionWithSeparator(t){this.dslMethods.repetitionWithSeparator.push(t)}visitRepetitionMandatory(t){this.dslMethods.repetitionMandatory.push(t)}visitRepetitionMandatoryWithSeparator(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)}visitRepetition(t){this.dslMethods.repetition.push(t)}visitAlternation(t){this.dslMethods.alternation.push(t)}};function Qs(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset==1&&(t.endOffset=e.endOffset)}function Zs(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset==1&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function ta(t,e){Object.defineProperty(t,"name",{enumerable:!1,configurable:!0,writable:!1,value:e})}function ea(t,e){const n=Vt(t),r=n.length;for(let i=0;i<r;i++){const r=t[n[i]],o=r.length;for(let t=0;t<o;t++){const n=r[t];void 0===n.tokenTypeIdx&&this[n.name](n.children,e)}}}(Xs=Ys||(Ys={}))[Xs.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",Xs[Xs.MISSING_METHOD=1]="MISSING_METHOD";var na={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(na);var ra=!0,ia=Math.pow(2,8)-1,oa=Ko({name:"RECORDING_PHASE_TOKEN",pattern:Po.NA});Oo([oa]);var sa=Vo(oa,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(sa);var aa={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}};function ca(t,e,n,r=!1){la(n);const i=Rr(this.recordingProdStack),o=F(e)?e:e.DEF,s=new t({definition:[],idx:n});return r&&(s.separator=e.SEP),Gr(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(s),o.call(this),i.definition.push(s),this.recordingProdStack.pop(),na}function ua(t,e){la(e);const n=Rr(this.recordingProdStack),r=!1===R(t),i=!1===r?t:t.DEF,o=new Ii({definition:[],idx:e,ignoreAmbiguities:r&&!0===t.IGNORE_AMBIGUITIES});Gr(t,"MAX_LOOKAHEAD")&&(o.maxLookahead=t.MAX_LOOKAHEAD);const s=ii(i,(t=>F(t.GATE)));return o.hasPredicates=s,n.definition.push(o),Or(i,(t=>{const e=new pi({definition:[]});o.definition.push(e),Gr(t,"IGNORE_AMBIGUITIES")?e.ignoreAmbiguities=t.IGNORE_AMBIGUITIES:Gr(t,"GATE")&&(e.ignoreAmbiguities=!0),this.recordingProdStack.push(e),t.ALT.call(this),this.recordingProdStack.pop()})),na}function ha(t){return 0===t?"":`${t}`}function la(t){if(t<0||t>ia){const e=new Error(`Invalid DSL Method idx value: <${t}>\n\tIdx value must be a none negative value smaller than ${ia+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}var da=Vo(Wo,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(da);var fa,pa,ma=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:zo,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Ta=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});(pa=fa||(fa={}))[pa.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",pa[pa.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",pa[pa.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",pa[pa.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",pa[pa.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",pa[pa.LEFT_RECURSION=5]="LEFT_RECURSION",pa[pa.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",pa[pa.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",pa[pa.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",pa[pa.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",pa[pa.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",pa[pa.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",pa[pa.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",pa[pa.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION";var Ea,ga=class t{static performSelfAnalysis(t){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",(()=>{let e;this.selfAnalysisDone=!0;const n=this.className;this.TRACE_INIT("toFastProps",(()=>{hi(this)})),this.TRACE_INIT("Grammar Recording",(()=>{try{this.enableRecording(),Or(this.definedRulesNames,(t=>{const e=this[t].originalGrammarAction;let n;this.TRACE_INIT(`${t} Rule`,(()=>{n=this.topLevelRuleRecord(t,e)})),this.gastProductionsCache[t]=n}))}finally{this.disableRecording()}}));let r=[];if(this.TRACE_INIT("Grammar Resolving",(()=>{r=function(t){const e=Er(t,{errMsgProvider:qo}),n={};return Or(t.rules,(t=>{n[t.name]=t})),function(t,e){const n=new Qo(t,e);return n.resolveRefs(),n.errors}(n,e.errMsgProvider)}({rules:$r(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(r)})),this.TRACE_INIT("Grammar Validations",(()=>{if(Yr(r)&&!1===this.skipValidations){const e=(t={rules:$r(this.gastProductionsCache),tokenTypes:$r(this.tokensMap),errMsgProvider:Jo,grammarName:n},function(t,e,n,r){const i=wr(t,(t=>function(t,e){const n=new Os;t.accept(n);const r=n.allProductions,i=Fr(r,vs),o=Zr(i,(t=>t.length>1));return Mr($r(o),(n=>{const r=Pr(n),i=e.buildDuplicateFoundError(t,n),o=Ni(r),s={message:i,type:fa.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:o,occurrence:r.idx},a=ys(r);return a&&(s.parameter=a),s}))}(t,n))),o=function(t,e,n){const r=[],i=Mr(e,(t=>t.name));return Or(t,(t=>{const e=t.name;if(Kr(i,e)){const i=n.buildNamespaceConflictError(t);r.push({message:i,type:fa.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:e})}})),r}(t,e,n),s=wr(t,(t=>function(t,e){const n=new Ss;t.accept(n);const r=n.alternations;return wr(r,(n=>n.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:n}),type:fa.TOO_MANY_ALTS,ruleName:t.name,occurrence:n.idx}]:[]))}(t,n))),a=wr(t,(e=>function(t,e,n,r){const i=[],o=ei(e,((e,n)=>n.name===t.name?e+1:e),0);if(o>1){const e=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});i.push({message:e,type:fa.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}(e,t,r,n)));return i.concat(o,s,a)}((t=Er(t,{errMsgProvider:Jo})).rules,t.tokenTypes,t.errMsgProvider,t.grammarName)),r=function(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return Mr(e,(t=>Object.assign({type:fa.CUSTOM_LOOKAHEAD_VALIDATION},t)))}({lookaheadStrategy:this.lookaheadStrategy,rules:$r(this.gastProductionsCache),tokenTypes:$r(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(e,r)}var t})),Yr(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",(()=>{const t=function(t){const e={};return Or(t,(t=>{const n=new Ci(t).startWalking();Yt(e,n)})),e}($r(this.gastProductionsCache));this.resyncFollows=t})),this.TRACE_INIT("ComputeLookaheadFunctions",(()=>{var t,e;null===(e=(t=this.lookaheadStrategy).initialize)||void 0===e||e.call(t,{rules:$r(this.gastProductionsCache)}),this.preComputeLookaheadFunctions($r(this.gastProductionsCache))}))),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!Yr(this.definitionErrors))throw e=Mr(this.definitionErrors,(t=>t.message)),new Error(`Parser Definition Errors detected:\n ${e.join("\n-------------------------------\n")}`)}))}constructor(t,e){this.definitionErrors=[],this.selfAnalysisDone=!1;const n=this;if(n.initErrorHandler(e),n.initLexerAdapter(),n.initLooksAhead(e),n.initRecognizerEngine(t,e),n.initRecoverable(e),n.initTreeBuilder(e),n.initContentAssist(),n.initGastRecorder(e),n.initPerformanceTracer(e),Gr(e,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=Gr(e,"skipValidations")?e.skipValidations:ma.skipValidations}};ga.DEFER_DEFINITION_ERRORS_HANDLING=!1,Ea=ga,[class{initRecoverable(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=Gr(t,"recoveryEnabled")?t.recoveryEnabled:ma.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Hs)}getTokenToInsert(t){const e=Vo(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return e.isInsertedInRecovery=!0,e}canTokenTypeBeInsertedInRecovery(t){return!0}canTokenTypeBeDeletedInRecovery(t){return!0}tryInRepetitionRecovery(t,e,n,r){const i=this.findReSyncTokenType(),o=this.exportLexerState(),s=[];let a=!1;const c=this.LA(1);let u=this.LA(1);const h=()=>{const t=this.LA(0),e=this.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:c,previous:t,ruleName:this.getCurrRuleFullName()}),n=new Us(e,c,this.LA(0));n.resyncedTokens=yr(s),this.SAVE_ERROR(n)};for(;!a;){if(this.tokenMatcher(u,r))return void h();if(n.call(this))return h(),void t.apply(this,e);this.tokenMatcher(u,i)?a=!0:(u=this.SKIP_TOKEN(),this.addToResyncTokens(u,s))}this.importLexerState(o)}shouldInRepetitionRecoveryBeTried(t,e,n){return!1!==n&&!this.tokenMatcher(this.LA(1),t)&&!this.isBackTracking()&&!this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,e))}getFollowsForInRuleRecovery(t,e){const n=this.getCurrentGrammarPath(t,e);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(t,e){if(this.canRecoverWithSingleTokenInsertion(t,e))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){const t=this.SKIP_TOKEN();return this.consumeToken(),t}throw new $s("sad sad panda")}canPerformInRuleRecovery(t,e){return this.canRecoverWithSingleTokenInsertion(t,e)||this.canRecoverWithSingleTokenDeletion(t)}canRecoverWithSingleTokenInsertion(t,e){if(!this.canTokenTypeBeInsertedInRecovery(t))return!1;if(Yr(e))return!1;const n=this.LA(1);return void 0!==xr(e,(t=>this.tokenMatcher(n,t)))}canRecoverWithSingleTokenDeletion(t){return!!this.canTokenTypeBeDeletedInRecovery(t)&&this.tokenMatcher(this.LA(2),t)}isInCurrentRuleReSyncSet(t){const e=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(e);return Kr(n,t)}findReSyncTokenType(){const t=this.flattenFollowSet();let e=this.LA(1),n=2;for(;;){const r=xr(t,(t=>Io(e,t)));if(void 0!==r)return r;e=this.LA(n),n++}}getCurrFollowKey(){if(1===this.RULE_STACK.length)return Gs;const t=this.getLastExplicitRuleShortName(),e=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:e,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){const t=this.RULE_STACK,e=this.RULE_OCCURRENCE_STACK;return Mr(t,((n,r)=>0===r?Gs:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:e[r],inRule:this.shortRuleNameToFullName(t[r-1])}))}flattenFollowSet(){const t=Mr(this.buildFullFollowKeyStack(),(t=>this.getFollowSetFromFollowKey(t)));return Le(t)}getFollowSetFromFollowKey(t){if(t===Gs)return[Wo];const e=t.ruleName+t.idxInCallingRule+ki+t.inRule;return this.resyncFollows[e]}addToResyncTokens(t,e){return this.tokenMatcher(t,Wo)||e.push(t),e}reSyncTo(t){const e=[];let n=this.LA(1);for(;!1===this.tokenMatcher(n,t);)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,e);return yr(e)}attemptInRepetitionRecovery(t,e,n,r,i,o,s){}getCurrentGrammarPath(t,e){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:Un(this.RULE_OCCURRENCE_STACK),lastTok:t,lastTokOccurrence:e}}getHumanReadableRuleStack(){return Mr(this.RULE_STACK,(t=>this.shortRuleNameToFullName(t)))}},class{initLooksAhead(t){this.dynamicTokensEnabled=Gr(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:ma.dynamicTokensEnabled,this.maxLookahead=Gr(t,"maxLookahead")?t.maxLookahead:ma.maxLookahead,this.lookaheadStrategy=Gr(t,"lookaheadStrategy")?t.lookaheadStrategy:new qs({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(t){Or(t,(t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,(()=>{const{alternation:e,repetition:n,option:r,repetitionMandatory:i,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:s}=function(t){Js.reset(),t.accept(Js);const e=Js.dslMethods;return Js.reset(),e}(t);Or(e,(e=>{const n=0===e.idx?"":e.idx;this.TRACE_INIT(`${Ni(e)}${n}`,(()=>{const n=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:e.idx,rule:t,maxLookahead:e.maxLookahead||this.maxLookahead,hasPredicates:e.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),r=zs(this.fullRuleNameToShort[t.name],256,e.idx);this.setLaFuncCache(r,n)}))})),Or(n,(e=>{this.computeLookaheadFunc(t,e.idx,768,"Repetition",e.maxLookahead,Ni(e))})),Or(r,(e=>{this.computeLookaheadFunc(t,e.idx,512,"Option",e.maxLookahead,Ni(e))})),Or(i,(e=>{this.computeLookaheadFunc(t,e.idx,Ks,"RepetitionMandatory",e.maxLookahead,Ni(e))})),Or(o,(e=>{this.computeLookaheadFunc(t,e.idx,Vs,"RepetitionMandatoryWithSeparator",e.maxLookahead,Ni(e))})),Or(s,(e=>{this.computeLookaheadFunc(t,e.idx,Ws,"RepetitionWithSeparator",e.maxLookahead,Ni(e))}))}))}))}computeLookaheadFunc(t,e,n,r,i,o){this.TRACE_INIT(`${o}${0===e?"":e}`,(()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:e,rule:t,maxLookahead:i||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:r}),s=zs(this.fullRuleNameToShort[t.name],n,e);this.setLaFuncCache(s,o)}))}getKeyForAutomaticLookahead(t,e){return zs(this.getLastExplicitRuleShortName(),t,e)}getLaFuncFromCache(t){return this.lookAheadFuncsCache.get(t)}setLaFuncCache(t,e){this.lookAheadFuncsCache.set(t,e)}},class{initTreeBuilder(t){if(this.CST_STACK=[],this.outputCst=t.outputCst,this.nodeLocationTracking=Gr(t,"nodeLocationTracking")?t.nodeLocationTracking:ma.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Zs,this.setNodeLocationFromNode=Zs,this.cstPostRule=Z,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Z,this.setNodeLocationFromNode=Z,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Qs,this.setNodeLocationFromNode=Qs,this.cstPostRule=Z,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Z,this.setNodeLocationFromNode=Z,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error(`Invalid <nodeLocationTracking> config option: "${t.nodeLocationTracking}"`);this.setNodeLocationFromToken=Z,this.setNodeLocationFromNode=Z,this.cstPostRule=Z,this.setInitialNodeLocation=Z}else this.cstInvocationStateUpdate=Z,this.cstFinallyStateUpdate=Z,this.cstPostTerminal=Z,this.cstPostNonTerminal=Z,this.cstPostRule=Z}setInitialNodeLocationOnlyOffsetRecovery(t){t.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(t){const e=this.LA(1);t.location={startOffset:e.startOffset,startLine:e.startLine,startColumn:e.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(t){const e={name:t,children:Object.create(null)};this.setInitialNodeLocation(e),this.CST_STACK.push(e)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(t){const e=this.LA(0),n=t.location;n.startOffset<=e.startOffset==1?(n.endOffset=e.endOffset,n.endLine=e.endLine,n.endColumn=e.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(t){const e=this.LA(0),n=t.location;n.startOffset<=e.startOffset==1?n.endOffset=e.endOffset:n.startOffset=NaN}cstPostTerminal(t,e){const n=this.CST_STACK[this.CST_STACK.length-1];var r,i,o;i=e,o=t,void 0===(r=n).children[o]?r.children[o]=[i]:r.children[o].push(i),this.setNodeLocationFromToken(n.location,e)}cstPostNonTerminal(t,e){const n=this.CST_STACK[this.CST_STACK.length-1];!function(t,e,n){void 0===t.children[e]?t.children[e]=[n]:t.children[e].push(n)}(n,e,t),this.setNodeLocationFromNode(n.location,t.location)}getBaseCstVisitorConstructor(){if(Jr(this.baseCstVisitorConstructor)){const t=function(t,e){const n=function(){};ta(n,t+"BaseSemantics");const r={visit:function(t,e){if(R(t)&&(t=t[0]),!Jr(t))return this[t.name](t.children,e)},validateVisitor:function(){const t=function(t,e){const n=function(t,e){const n=kr(e,(e=>!1===F(t[e]))),r=Mr(n,(e=>({msg:`Missing visitor method: <${e}> on ${t.constructor.name} CST Visitor.`,type:Ys.MISSING_METHOD,methodName:e})));return Fn(r)}(t,e);return n}(this,e);if(!Yr(t)){const e=Mr(t,(t=>t.msg));throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:\n\t${e.join("\n\n").replace(/\n/g,"\n\t")}`)}}};return(n.prototype=r).constructor=n,n._RULE_NAMES=e,n}(this.className,Vt(this.gastProductionsCache));return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Jr(this.baseCstVisitorWithDefaultsConstructor)){const t=function(t,e,n){const r=function(){};ta(r,t+"BaseSemanticsWithDefaults");const i=Object.create(n.prototype);return Or(e,(t=>{i[t]=ea})),(r.prototype=i).constructor=r,r}(this.className,Vt(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const t=this.RULE_STACK;return t[t.length-1]}getPreviousExplicitRuleShortName(){const t=this.RULE_STACK;return t[t.length-2]}getLastExplicitRuleOccurrenceIndex(){const t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]}},class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(t){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):da}LA(t){const e=this.currIdx+t;return e<0||this.tokVectorLength<=e?da:this.tokVector[e]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(t){this.currIdx=t}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}},class{initRecognizerEngine(t,e){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Ro,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},Gr(e,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if(R(t)){if(Yr(t))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof t[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(R(t))this.tokensMap=ei(t,((t,e)=>(t[e.name]=e,t)),{});else if(Gr(t,"modes")&&Sr(Le($r(t.modes)),Lo)){const e=Le($r(t.modes)),n=si(e);this.tokensMap=ei(n,((t,e)=>(t[e.name]=e,t)),{})}else{if(!L(t))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=Un(t)}this.tokensMap.EOF=Wo;const n=Gr(t,"modes")?Le($r(t.modes)):$r(t),r=Sr(n,(t=>Yr(t.categoryMatches)));this.tokenMatcher=r?Ro:Io,Oo($r(this.tokensMap))}defineRule(t,e,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${t}> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const r=Gr(n,"resyncEnabled")?n.resyncEnabled:Ta.resyncEnabled,i=Gr(n,"recoveryValueFunc")?n.recoveryValueFunc:Ta.recoveryValueFunc,o=this.ruleShortNameIdx<<12;let s;return this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=t,this.fullRuleNameToShort[t]=o,s=!0===this.outputCst?function(...n){try{this.ruleInvocationStateUpdate(o,t,this.subruleIdx),e.apply(this,n);const r=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(r),r}catch(t){return this.invokeRuleCatch(t,r,i)}finally{this.ruleFinallyStateUpdate()}}:function(...n){try{return this.ruleInvocationStateUpdate(o,t,this.subruleIdx),e.apply(this,n)}catch(t){return this.invokeRuleCatch(t,r,i)}finally{this.ruleFinallyStateUpdate()}},Object.assign(s,{ruleName:t,originalGrammarAction:e})}invokeRuleCatch(t,e,n){const r=1===this.RULE_STACK.length,i=e&&!this.isBackTracking()&&this.recoveryEnabled;if(Ms(t)){const e=t;if(i){const r=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(r)){if(e.resyncedTokens=this.reSyncTo(r),this.outputCst){const t=this.CST_STACK[this.CST_STACK.length-1];return t.recoveredNode=!0,t}return n(t)}if(this.outputCst){const t=this.CST_STACK[this.CST_STACK.length-1];t.recoveredNode=!0,e.partialCstResult=t}throw e}if(r)return this.moveToTerminatedState(),n(t);throw e}throw t}optionInternal(t,e){const n=this.getKeyForAutomaticLookahead(512,e);return this.optionInternalLogic(t,e,n)}optionInternalLogic(t,e,n){let r,i=this.getLaFuncFromCache(n);if("function"!=typeof t){r=t.DEF;const e=t.GATE;if(void 0!==e){const t=i;i=()=>e.call(this)&&t.call(this)}}else r=t;if(!0===i.call(this))return r.call(this)}atLeastOneInternal(t,e){const n=this.getKeyForAutomaticLookahead(Ks,t);return this.atLeastOneInternalLogic(t,e,n)}atLeastOneInternalLogic(t,e,n){let r,i=this.getLaFuncFromCache(n);if("function"!=typeof e){r=e.DEF;const t=e.GATE;if(void 0!==t){const e=i;i=()=>t.call(this)&&e.call(this)}}else r=e;if(!0!==i.call(this))throw this.raiseEarlyExitException(t,Yo.REPETITION_MANDATORY,e.ERR_MSG);{let t=this.doSingleRepetition(r);for(;!0===i.call(this)&&!0===t;)t=this.doSingleRepetition(r)}this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,e],i,Ks,t,is)}atLeastOneSepFirstInternal(t,e){const n=this.getKeyForAutomaticLookahead(Vs,t);this.atLeastOneSepFirstInternalLogic(t,e,n)}atLeastOneSepFirstInternalLogic(t,e,n){const r=e.DEF,i=e.SEP;if(!0!==this.getLaFuncFromCache(n).call(this))throw this.raiseEarlyExitException(t,Yo.REPETITION_MANDATORY_WITH_SEPARATOR,e.ERR_MSG);{r.call(this);const e=()=>this.tokenMatcher(this.LA(1),i);for(;!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,i,e,r,os],e,Vs,t,os)}}manyInternal(t,e){const n=this.getKeyForAutomaticLookahead(768,t);return this.manyInternalLogic(t,e,n)}manyInternalLogic(t,e,n){let r,i=this.getLaFuncFromCache(n);if("function"!=typeof e){r=e.DEF;const t=e.GATE;if(void 0!==t){const e=i;i=()=>t.call(this)&&e.call(this)}}else r=e;let o=!0;for(;!0===i.call(this)&&!0===o;)o=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.manyInternal,[t,e],i,768,t,ns,o)}manySepFirstInternal(t,e){const n=this.getKeyForAutomaticLookahead(Ws,t);this.manySepFirstInternalLogic(t,e,n)}manySepFirstInternalLogic(t,e,n){const r=e.DEF,i=e.SEP;if(!0===this.getLaFuncFromCache(n).call(this)){r.call(this);const e=()=>this.tokenMatcher(this.LA(1),i);for(;!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,i,e,r,rs],e,Ws,t,rs)}}repetitionSepSecondInternal(t,e,n,r,i){for(;n();)this.CONSUME(e),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,e,n,r,i],n,Vs,t,i)}doSingleRepetition(t){const e=this.getLexerPosition();return t.call(this),this.getLexerPosition()>e}orInternal(t,e){const n=this.getKeyForAutomaticLookahead(256,e),r=R(t)?t:t.DEF,i=this.getLaFuncFromCache(n).call(this,r);if(void 0!==i)return r[i].ALT.call(this);this.raiseNoAltException(e,t.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){const t=this.LA(1),e=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Ds(e,t))}}subruleInternal(t,e,n){let r;try{const i=void 0!==n?n.ARGS:void 0;return this.subruleIdx=e,r=t.apply(this,i),this.cstPostNonTerminal(r,void 0!==n&&void 0!==n.LABEL?n.LABEL:t.ruleName),r}catch(e){throw this.subruleInternalError(e,n,t.ruleName)}}subruleInternalError(t,e,n){throw Ms(t)&&void 0!==t.partialCstResult&&(this.cstPostNonTerminal(t.partialCstResult,void 0!==e&&void 0!==e.LABEL?e.LABEL:n),delete t.partialCstResult),t}consumeInternal(t,e,n){let r;try{const e=this.LA(1);!0===this.tokenMatcher(e,t)?(this.consumeToken(),r=e):this.consumeInternalError(t,e,n)}catch(n){r=this.consumeInternalRecovery(t,e,n)}return this.cstPostTerminal(void 0!==n&&void 0!==n.LABEL?n.LABEL:t.name,r),r}consumeInternalError(t,e,n){let r;const i=this.LA(0);throw r=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:e,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Us(r,e,i))}consumeInternalRecovery(t,e,n){if(!this.recoveryEnabled||"MismatchedTokenException"!==n.name||this.isBackTracking())throw n;{const r=this.getFollowsForInRuleRecovery(t,e);try{return this.tryInRuleRecovery(t,r)}catch(t){throw t.name===Bs?n:t}}}saveRecogState(){const t=this.errors,e=Un(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:e,CST_STACK:this.CST_STACK}}reloadRecogState(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK}ruleInvocationStateUpdate(t,e,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(e)}isBackTracking(){return 0!==this.isBackTrackingStack.length}getCurrRuleFullName(){const t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]}shortRuleNameToFullName(t){return this.shortRuleNameToFull[t]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Wo)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}},class{ACTION(t){return t.call(this)}consume(t,e,n){return this.consumeInternal(e,t,n)}subrule(t,e,n){return this.subruleInternal(e,t,n)}option(t,e){return this.optionInternal(e,t)}or(t,e){return this.orInternal(e,t)}many(t,e){return this.manyInternal(t,e)}atLeastOne(t,e){return this.atLeastOneInternal(t,e)}CONSUME(t,e){return this.consumeInternal(t,0,e)}CONSUME1(t,e){return this.consumeInternal(t,1,e)}CONSUME2(t,e){return this.consumeInternal(t,2,e)}CONSUME3(t,e){return this.consumeInternal(t,3,e)}CONSUME4(t,e){return this.consumeInternal(t,4,e)}CONSUME5(t,e){return this.consumeInternal(t,5,e)}CONSUME6(t,e){return this.consumeInternal(t,6,e)}CONSUME7(t,e){return this.consumeInternal(t,7,e)}CONSUME8(t,e){return this.consumeInternal(t,8,e)}CONSUME9(t,e){return this.consumeInternal(t,9,e)}SUBRULE(t,e){return this.subruleInternal(t,0,e)}SUBRULE1(t,e){return this.subruleInternal(t,1,e)}SUBRULE2(t,e){return this.subruleInternal(t,2,e)}SUBRULE3(t,e){return this.subruleInternal(t,3,e)}SUBRULE4(t,e){return this.subruleInternal(t,4,e)}SUBRULE5(t,e){return this.subruleInternal(t,5,e)}SUBRULE6(t,e){return this.subruleInternal(t,6,e)}SUBRULE7(t,e){return this.subruleInternal(t,7,e)}SUBRULE8(t,e){return this.subruleInternal(t,8,e)}SUBRULE9(t,e){return this.subruleInternal(t,9,e)}OPTION(t){return this.optionInternal(t,0)}OPTION1(t){return this.optionInternal(t,1)}OPTION2(t){return this.optionInternal(t,2)}OPTION3(t){return this.optionInternal(t,3)}OPTION4(t){return this.optionInternal(t,4)}OPTION5(t){return this.optionInternal(t,5)}OPTION6(t){return this.optionInternal(t,6)}OPTION7(t){return this.optionInternal(t,7)}OPTION8(t){return this.optionInternal(t,8)}OPTION9(t){return this.optionInternal(t,9)}OR(t){return this.orInternal(t,0)}OR1(t){return this.orInternal(t,1)}OR2(t){return this.orInternal(t,2)}OR3(t){return this.orInternal(t,3)}OR4(t){return this.orInternal(t,4)}OR5(t){return this.orInternal(t,5)}OR6(t){return this.orInternal(t,6)}OR7(t){return this.orInternal(t,7)}OR8(t){return this.orInternal(t,8)}OR9(t){return this.orInternal(t,9)}MANY(t){this.manyInternal(0,t)}MANY1(t){this.manyInternal(1,t)}MANY2(t){this.manyInternal(2,t)}MANY3(t){this.manyInternal(3,t)}MANY4(t){this.manyInternal(4,t)}MANY5(t){this.manyInternal(5,t)}MANY6(t){this.manyInternal(6,t)}MANY7(t){this.manyInternal(7,t)}MANY8(t){this.manyInternal(8,t)}MANY9(t){this.manyInternal(9,t)}MANY_SEP(t){this.manySepFirstInternal(0,t)}MANY_SEP1(t){this.manySepFirstInternal(1,t)}MANY_SEP2(t){this.manySepFirstInternal(2,t)}MANY_SEP3(t){this.manySepFirstInternal(3,t)}MANY_SEP4(t){this.manySepFirstInternal(4,t)}MANY_SEP5(t){this.manySepFirstInternal(5,t)}MANY_SEP6(t){this.manySepFirstInternal(6,t)}MANY_SEP7(t){this.manySepFirstInternal(7,t)}MANY_SEP8(t){this.manySepFirstInternal(8,t)}MANY_SEP9(t){this.manySepFirstInternal(9,t)}AT_LEAST_ONE(t){this.atLeastOneInternal(0,t)}AT_LEAST_ONE1(t){return this.atLeastOneInternal(1,t)}AT_LEAST_ONE2(t){this.atLeastOneInternal(2,t)}AT_LEAST_ONE3(t){this.atLeastOneInternal(3,t)}AT_LEAST_ONE4(t){this.atLeastOneInternal(4,t)}AT_LEAST_ONE5(t){this.atLeastOneInternal(5,t)}AT_LEAST_ONE6(t){this.atLeastOneInternal(6,t)}AT_LEAST_ONE7(t){this.atLeastOneInternal(7,t)}AT_LEAST_ONE8(t){this.atLeastOneInternal(8,t)}AT_LEAST_ONE9(t){this.atLeastOneInternal(9,t)}AT_LEAST_ONE_SEP(t){this.atLeastOneSepFirstInternal(0,t)}AT_LEAST_ONE_SEP1(t){this.atLeastOneSepFirstInternal(1,t)}AT_LEAST_ONE_SEP2(t){this.atLeastOneSepFirstInternal(2,t)}AT_LEAST_ONE_SEP3(t){this.atLeastOneSepFirstInternal(3,t)}AT_LEAST_ONE_SEP4(t){this.atLeastOneSepFirstInternal(4,t)}AT_LEAST_ONE_SEP5(t){this.atLeastOneSepFirstInternal(5,t)}AT_LEAST_ONE_SEP6(t){this.atLeastOneSepFirstInternal(6,t)}AT_LEAST_ONE_SEP7(t){this.atLeastOneSepFirstInternal(7,t)}AT_LEAST_ONE_SEP8(t){this.atLeastOneSepFirstInternal(8,t)}AT_LEAST_ONE_SEP9(t){this.atLeastOneSepFirstInternal(9,t)}RULE(t,e,n=Ta){if(Kr(this.definedRulesNames,t)){const e={message:Jo.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:fa.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(e)}this.definedRulesNames.push(t);const r=this.defineRule(t,e,n);return this[t]=r,r}OVERRIDE_RULE(t,e,n=Ta){const r=function(t,e,n){const r=[];let i;return Kr(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,r.push({message:i,type:fa.INVALID_RULE_OVERRIDE,ruleName:t})),r}(t,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(r);const i=this.defineRule(t,e,n);return this[t]=i,i}BACKTRACK(t,e){return function(){this.isBackTrackingStack.push(1);const n=this.saveRecogState();try{return t.apply(this,e),!0}catch(t){if(Ms(t))return!1;throw t}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return t=$r(this.gastProductionsCache),Mr(t,vi);var t}},class{initErrorHandler(t){this._errors=[],this.errorMessageProvider=Gr(t,"errorMessageProvider")?t.errorMessageProvider:ma.errorMessageProvider}SAVE_ERROR(t){if(Ms(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:Un(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return Un(this._errors)}set errors(t){this._errors=t}raiseEarlyExitException(t,e,n){const r=this.getCurrRuleFullName(),i=As(t,this.getGAstProductions()[r],e,this.maxLookahead)[0],o=[];for(let t=1;t<=this.maxLookahead;t++)o.push(this.LA(t));const s=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:i,actual:o,previous:this.LA(0),customUserDescription:n,ruleName:r});throw this.SAVE_ERROR(new js(s,this.LA(1),this.LA(0)))}raiseNoAltException(t,e){const n=this.getCurrRuleFullName(),r=gs(t,this.getGAstProductions()[n],this.maxLookahead),i=[];for(let t=1;t<=this.maxLookahead;t++)i.push(this.LA(t));const o=this.LA(0),s=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:r,actual:i,previous:o,customUserDescription:e,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Fs(s,this.LA(1),o))}},class{initContentAssist(){}computeContentAssist(t,e){const n=this.gastProductionsCache[t];if(Jr(n))throw Error(`Rule ->${t}<- does not exist in this grammar.`);return as([n],e,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(t){const e=Pr(t.ruleStack),n=this.getGAstProductions()[e];return new ts(n,t).startWalking()}},class{initGastRecorder(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(()=>{for(let t=0;t<10;t++){const e=t>0?t:"";this[`CONSUME${e}`]=function(e,n){return this.consumeInternalRecord(e,t,n)},this[`SUBRULE${e}`]=function(e,n){return this.subruleInternalRecord(e,t,n)},this[`OPTION${e}`]=function(e){return this.optionInternalRecord(e,t)},this[`OR${e}`]=function(e){return this.orInternalRecord(e,t)},this[`MANY${e}`]=function(e){this.manyInternalRecord(t,e)},this[`MANY_SEP${e}`]=function(e){this.manySepFirstInternalRecord(t,e)},this[`AT_LEAST_ONE${e}`]=function(e){this.atLeastOneInternalRecord(t,e)},this[`AT_LEAST_ONE_SEP${e}`]=function(e){this.atLeastOneSepFirstInternalRecord(t,e)}}this.consume=function(t,e,n){return this.consumeInternalRecord(e,t,n)},this.subrule=function(t,e,n){return this.subruleInternalRecord(e,t,n)},this.option=function(t,e){return this.optionInternalRecord(e,t)},this.or=function(t,e){return this.orInternalRecord(e,t)},this.many=function(t,e){this.manyInternalRecord(t,e)},this.atLeastOne=function(t,e){this.atLeastOneInternalRecord(t,e)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD}))}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(()=>{const t=this;for(let e=0;e<10;e++){const n=e>0?e:"";delete t[`CONSUME${n}`],delete t[`SUBRULE${n}`],delete t[`OPTION${n}`],delete t[`OR${n}`],delete t[`MANY${n}`],delete t[`MANY_SEP${n}`],delete t[`AT_LEAST_ONE${n}`],delete t[`AT_LEAST_ONE_SEP${n}`]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA}))}ACTION_RECORD(t){}BACKTRACK_RECORD(t,e){return()=>!0}LA_RECORD(t){return da}topLevelRuleRecord(t,e){try{const n=new fi({definition:[],name:t});return n.name=t,this.recordingProdStack.push(n),e.call(this),this.recordingProdStack.pop(),n}catch(t){if(!0!==t.KNOWN_RECORDER_ERROR)try{t.message=t.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch(e){throw t}throw t}}optionInternalRecord(t,e){return ca.call(this,mi,t,e)}atLeastOneInternalRecord(t,e){ca.call(this,Ti,e,t)}atLeastOneSepFirstInternalRecord(t,e){ca.call(this,Ei,e,t,ra)}manyInternalRecord(t,e){ca.call(this,gi,e,t)}manySepFirstInternalRecord(t,e){ca.call(this,Ai,e,t,ra)}orInternalRecord(t,e){return ua.call(this,t,e)}subruleInternalRecord(t,e,n){if(la(e),!t||!1===Gr(t,"ruleName")){const n=new Error(`<SUBRULE${ha(e)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(t)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw n.KNOWN_RECORDER_ERROR=!0,n}const r=Rr(this.recordingProdStack),i=t.ruleName,o=new di({idx:e,nonTerminalName:i,label:null==n?void 0:n.LABEL,referencedRule:void 0});return r.definition.push(o),this.outputCst?aa:na}consumeInternalRecord(t,e,n){if(la(e),!_o(t)){const n=new Error(`<CONSUME${ha(e)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(t)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw n.KNOWN_RECORDER_ERROR=!0,n}const r=Rr(this.recordingProdStack),i=new Ri({idx:e,terminalType:t,label:null==n?void 0:n.LABEL});return r.definition.push(i),sa}},class{initPerformanceTracer(t){if(Gr(t,"traceInitPerf")){const e=t.traceInitPerf,n="number"==typeof e;this.traceInitMaxIdent=n?e:1/0,this.traceInitPerf=n?e>0:e}else this.traceInitMaxIdent=0,this.traceInitPerf=ma.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(t,e){if(!0===this.traceInitPerf){this.traceInitIndent++;const n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--\x3e <${t}>`);const{time:r,value:i}=ui(e),o=r>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&o(`${n}<-- <${t}> time: ${r}ms`),this.traceInitIndent--,i}return e()}}].forEach((t=>{const e=t.prototype;Object.getOwnPropertyNames(e).forEach((n=>{if("constructor"===n)return;const r=Object.getOwnPropertyDescriptor(e,n);r&&(r.get||r.set)?Object.defineProperty(Ea.prototype,n,r):Ea.prototype[n]=t.prototype[n]}))}));var Aa=class extends ga{constructor(t,e=ma){const n=Un(e);n.outputCst=!1,super(t,n)}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r](o,o.exports,n),o.loaded=!0,o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r=n(502);const i=(0,r.Ey)({name:"HeaderText",pattern:r.JG.NA}),o=(0,r.Ey)({name:"PropertiesNameText",pattern:r.JG.NA}),s=(0,r.Ey)({name:"PropertiesValueText",pattern:r.JG.NA}),a=(0,r.Ey)({name:"PageGroupHeaderText",pattern:r.JG.NA}),c=(0,r.Ey)({name:"InlineText",pattern:r.JG.NA}),u=(0,r.Ey)({name:"LCurly",pattern:/{ */,label:"{",categories:[i,c,s]}),h=(0,r.Ey)({name:"RCurly",pattern:/} */,label:"}",categories:[i,c,a]}),l=(0,r.Ey)({name:"Semicolon",pattern:/\; */,label:";",categories:[i,c,a,s]}),d=(0,r.Ey)({name:"Equals",pattern:/\=[ \t]*/,label:"=",categories:[i,c,a]}),f=(0,r.Ey)({name:"Hash",pattern:/\#+[ \t]*/,label:"#",categories:[i]}),p=(0,r.Ey)({name:"Plus",pattern:/\+ */,label:"+",categories:[i]}),m=(0,r.Ey)({name:"TripleDash",pattern:/---[ \t]*/,label:"---",categories:[c,a,s]}),T=(0,r.Ey)({name:"Dash",pattern:/-[ \t]*/,label:"-",categories:[c,a,s],longer_alt:m}),E=(0,r.Ey)({name:"Slash",pattern:/\/[ \t]*/,label:"/",categories:[i,a,s]}),g=(0,r.Ey)({name:"Ampersand",pattern:/\&[ \t]*/,label:"&",categories:[i,a,s]}),A=(0,r.Ey)({name:"Tab",pattern:/\t/}),I=(0,r.Ey)({name:"Text",pattern:/[^\{\}\=\;\&\#\+\n\r\t\/\- ][^\{\}\=\;\&\#\+\n\r\-]*/,categories:[i,c,a,o,s]}),R=(0,r.Ey)({name:"NewLine",pattern:/\n/,line_breaks:!0,group_stock:r.JG.SKIPPED}),v=[(0,r.Ey)({name:"Whitespace",pattern:/s+/,group_stock:r.JG.SKIPPED}),T,m,I,R,u,h,l,d,f,g,p,E,A,i,c,a,o,s],y=new r.JG(v);class O{constructor(t){this.form=t,this.reset()}doneRow(){if(!this.doneSingleItemRow()){for(let t=0;t<this.collectedItems.length;t++){let e=this.collectedItems[t],n=e.item,r=e.indent,i=this.getPrevAtIndex(t);"Inline"==n.name&&0==n.children.Items.length||(i=this.getItemAtIndent(i,r));let o=this.getIndent(i);this.add(n,i,o)}for(let t=this.collectedItems.length;t<this.prevGroups.length;t++){let e=this.prevGroups[t];this.currentGroups.push(e)}this.prevGroups=this.currentGroups.slice(),this.currentGroups=[],this.collectedItems=[]}}doneSingleItemRow(){if(1!=this.collectedItems.length)return!1;if(this.prevGroups.length<=1)return!1;let t=this.collectedItems[0].item,e=this.collectedItems[0].indent;return parent=this.getFirstParentPage(this.prevGroups[0]),"Inline"==t.name&&0==t.children.Items.length||(parent=this.getItemAtIndent(parent,e)),this.add(t,parent,0),this.prevGroups=this.currentGroups.slice(),this.currentGroups=[],this.collectedItems=[],!0}getPrevAtIndex(t){return t>=this.prevGroups.length?this.prevGroups.length>0?this.prevGroups[this.prevGroups.length-1]:this.form:this.prevGroups[t]}getItemAtIndent(t,e){let n=this.getIndent(t);if(e>=n)return t;let r=t;for(;n>e;)r=this.getParent(r),n=this.getIndent(r);return r}getIndent(t){return this.indents.get(t)}getParents(t){let e=[],n=t;for(;n!=this.form;)n=this.getParent(n),e.unshift(n);return e}getFirstParentPage(t){let e=this.form,n=this.getParents(t);for(let t=1;t<n.length;t++){const r=n[t];if("HGroup"==r.name)break;"Pages"!=r.name&&(e=r)}return e}getParent(t){const e=this.parents.get(t);return void 0===e?this.form:e}collect(t,e,n){this.collectedItems.push({item:t,indent:e,separator:n})}add(t,e,n){this.addPage(t,e,n)||this.addGroup(t,e,n)||("Pages"==e.name&&(e=this.getParent(e)),this.setParent(t,e),this.currentGroups.push(e))}addPage(t,e,n){if("Page"!=t.name)return!1;if("Pages"!=e.name){const t=this.getNewPages();this.setParent(t,e),this.setIndent(t,n),e=t}return this.setParent(t,e),this.setIndent(t,n+1),this.currentGroups.push(t),!0}addGroup(t,e,n){if("HGroup"!=t.name)return!1;this.setIndent(t,n),this.setParent(t,e);const r=t.children.Items;for(let t=0;t<r.length;t++){const e=r[t];let i=0;0==t&&(i=n),this.setIndent(e,i),this.currentGroups.push(e)}return!0}reset(){this.prevGroups=[this.form],this.currentGroups=[],this.collectedItems=[],this.parents=new WeakMap,this.indents=new WeakMap,this.setIndent(this.form,0)}setIndent(t,e){this.indents.set(t,e)}setParent(t,e){this.parents.set(t,e),e.children.Items.push(t)}createVGroup(t){const e={name:"VGroup",children:{VGroupHeader:[],Items:[],Properties:{}}};return e.children.VGroupHeader.push(this.createVGroupHeader()),this.setParent(e,t),e}createVGroupHeader(){return{name:"VGroupHeader",children:{Hash:[],Text:[]}}}createHGroup(){return{name:"HGroup",children:{Items:[],Properties:{}}}}createPage(){return{name:"Page",children:{PageHeader:[{name:"PageHeader",children:{Slash:[],Text:[],Properties:{}}}],Items:[],Properties:{}}}}getNewPages(){return{name:"Pages",children:{Items:[]}}}createOneLineGroup(){return{name:"OneLineGroup",children:{Items:[]}}}createInline(){return{name:"Inline",children:{Items:[]}}}}class N extends r.jr{constructor(){super(v);const t=this;t.RULE("Form",(()=>{let e={name:"Form",children:{Items:[],FormHeader:[]}},n=new O(e);return t.SUBRULE(t.Rows,{ARGS:[n]}),e})),t.RULE("Rows",(e=>{let n=!0,i=!1;t.MANY({GATE:()=>!i,DEF:()=>{t.OR([{IGNORE_AMBIGUITIES:!0,ALT:()=>{i=!0,t.CONSUME3(r.LT)}},{GATE:()=>n,ALT:()=>{let r=t.SUBRULE1(t.FormHeader);t.RECORDING_PHASE||e.form.children.FormHeader.push(r),n=!1}},{ALT:()=>{n=!1,t.SUBRULE(t.Row,{ARGS:[e]})}}])}})})),t.RULE("FormHeader",(()=>{let e={name:"FormHeader",children:{Dash:[],Text:[]}};return e.children.Dash.push(t.CONSUME1(m)),t.MANY((()=>{e.children.Text.push(t.CONSUME(i))})),e.children.Dash.push(t.CONSUME7(m)),t.OPTION({GATE:()=>t.LA(1).tokenType!=r.LT,DEF:()=>t.CONSUME(R)}),e})),t.RULE("VGroupHeader",((e,n)=>{let r,i;t.ACTION((()=>{r=e.createVGroup(n),i=r.children.VGroupHeader[0]}));let o=t.CONSUME(f);t.ACTION((()=>{i.children.Hash.push(o)})),t.MANY((()=>{let e=t.CONSUME(a);t.ACTION((()=>{i.children.Text.push(e)}))}));let s=t.SUBRULE(t.Properties);return t.ACTION((()=>{s.isProperties?r.children.Properties=s.properties:i.children.Text=i.children.Text.concat(s.tokens)})),r})),t.RULE("PageHeader",(e=>{let n,r;t.ACTION((()=>{n=e.createPage(),r=n.children.PageHeader[0]}));let i=t.CONSUME(E);t.ACTION((()=>{r.children.Slash.push(i)})),t.MANY((()=>{let e=t.CONSUME(a);t.ACTION((()=>{r.children.Text.push(e)}))}));let o=t.SUBRULE(t.Properties);return t.ACTION((()=>{o.isProperties?n.children.Properties=o.properties:r.children.Text=r.children.Text.concat(o.tokens)})),n})),t.RULE("Properties",(()=>{let e={properties:{},tokens:[],isProperties:!1,isPropertiesCounter:0};return t.OPTION1((()=>{e.tokens.push(t.CONSUME(u)),e.isPropertiesCounter++})),t.OPTION2((()=>{t.SUBRULE1(t.Property,{ARGS:[e]})})),t.OPTION3((()=>{e.tokens.push(t.CONSUME(h)),e.isPropertiesCounter++,t.MANY2((()=>{e.isPropertiesCounter=0,e.tokens.push(t.CONSUME(a))}))})),e.isProperties=e.isPropertiesCounter>1,e})),t.RULE("Property",(e=>{let n=[];t.RECORDING_PHASE||(n=e.tokens);let r,i,a=0;t.OPTION1((()=>{r=t.CONSUME1(o),n.push(r),a++})),t.OPTION2((()=>{n.push(t.CONSUME(d)),a++})),t.OPTION3((()=>{i=t.CONSUME2(s),n.push(i),a++})),t.RECORDING_PHASE||(a<3?e.isPropertiesCounter=0:e.properties[r.image]=i.image)})),t.RULE("Indents",(()=>{let e=0;return t.MANY((()=>{t.CONSUME(A),t.RECORDING_PHASE||e++})),e})),t.RULE("OneLineGroup",((e,n)=>{let r;t.ACTION((()=>{r=e.createOneLineGroup(),e.setParent(n,r)}));let i=!0;return t.MANY({GATE:()=>i,DEF:()=>{let n=this.CONSUME(c);i=!1,t.OPTION((()=>{t.CONSUME(g),i=!0})),t.ACTION((()=>{let t=e.createInline(r);e.setParent(t,r),t.children.Items.push(n)}))}}),r})),t.RULE("Inline",(e=>{let n;return t.ACTION((()=>{n=e.createInline()})),t.AT_LEAST_ONE((()=>{let e=this.CONSUME(c);t.ACTION((()=>{n.children.Items.push(e)}))})),t.OPTION((()=>{t.CONSUME(g),n=t.SUBRULE(t.OneLineGroup,{ARGS:[e,n]})})),n})),t.RULE("Column",(e=>{let n;return t.OR([{ALT:()=>{t.ACTION((()=>{n=e.createHGroup()})),t.AT_LEAST_ONE((()=>{t.SUBRULE(t.VGroupHeader,{ARGS:[e,n]})}))}},{ALT:()=>{n=t.SUBRULE(t.PageHeader,{ARGS:[e]})}},{ALT:()=>{n=t.SUBRULE(t.Inline,{ARGS:[e]})}}]),n})),t.RULE("RowSeparator",(()=>{let e=!1;return t.OR([{ALT:()=>{t.CONSUME(p),e=!0}},{IGNORE_AMBIGUITIES:!0,ALT:()=>{t.CONSUME(r.LT)}},{GATE:()=>t.LA(1).tokenType!=r.LT,ALT:()=>{t.CONSUME(R)}}]),e})),t.RULE("Row",(e=>{let n=!0;t.MANY({GATE:()=>n,DEF:()=>{let r;t.ACTION((()=>{r=e.createInline()}));let i=t.SUBRULE(t.Indents);t.OPTION((()=>{r=t.SUBRULE(t.Column,{ARGS:[e,i]})})),n=t.SUBRULE(t.RowSeparator),t.ACTION((()=>{e.collect(r,i,n)}))}}),t.ACTION((()=>{e.doneRow()}))})),this.performSelfAnalysis()}}const _=new N,S=_.getBaseCstVisitorConstructor(),L=new class extends S{Form(t){let e={Тип:"Форма",НаборСвойств:{},Элементы:[],ЭлементыПарсинг:[],ТипыСвойств:{},Координаты:{}};return void 0!==this.visit(t.FormHeader)&&(e.НаборСвойств.Заголовок=this.visit(t.FormHeader)),t.Items.forEach((t=>{e.ЭлементыПарсинг.push(this.visit(t))})),this.addChildLocation(e.ЭлементыПарсинг,e),e}FormHeader(t){return t.Text.map((t=>t.image)).join("").trim()}PageHeader(t){return t.Text.map((t=>t.image)).join("").trim()}VGroupHeader(t){return t.Text.map((t=>t.image)).join("").trim()}HGroup(t){let e={Тип:"ГоризонтальнаяГруппа",НаборСвойств:{},Элементы:[],ТипыСвойств:{},Координаты:{}};return t.Items.forEach((t=>{e.Элементы.push(this.visit(t))})),this.addChildLocation(e.Элементы,e),e}VGroup(t){let e={Тип:"ВертикальнаяГруппа",НаборСвойств:{},Элементы:[],ЭлементыПарсинг:[],ТипыСвойств:{},Координаты:{}};for(const[n,r]of Object.entries(t.Properties))e.НаборСвойств[n.trim()]=r.trim();return e.НаборСвойств.Заголовок=this.visit(t.VGroupHeader),this.addDisplayAndBehaviorToGroup(e["НаборСвойств"],t.VGroupHeader),t.Items.forEach((t=>{e.ЭлементыПарсинг.push(this.visit(t))})),t.VGroupHeader.length>0&&(this.consumeLocation(t.VGroupHeader[0].children.Hash,e),this.consumeLocation(t.VGroupHeader[0].children.Text,e)),this.addChildLocation(e.ЭлементыПарсинг,e),e}addDisplayAndBehaviorToGroup(t,e){if(0==e.length)return;const n=e[0].children.Hash[0].image.trim().length;let r,i;2===n?r="СлабоеВыделение":3===n?r="ОбычноеВыделение":4===n?r="СильноеВыделение":5===n?(t.hasOwnProperty("Отображение")||(r="ОбычноеВыделение"),i="Свертываемая"):6===n&&(t.hasOwnProperty("Отображение")||(r="ОбычноеВыделение"),i="Всплывающая"),void 0!==r&&(t["Отображение"]=r),void 0!==i&&(t["Поведение"]=i)}Pages(t){let e={Тип:"Страницы",НаборСвойств:{},Элементы:[],ТипыСвойств:{},Координаты:{}};return t.Items.forEach((t=>{e.Элементы.push(this.visit(t))})),this.addChildLocation(e.Элементы,e),e}Page(t){let e={Тип:"Страница",НаборСвойств:{},Элементы:[],ЭлементыПарсинг:[],ТипыСвойств:{},Координаты:{}};for(const[n,r]of Object.entries(t.Properties))e.НаборСвойств[n.trim()]=r.trim();return e.НаборСвойств.Заголовок=this.visit(t.PageHeader),t.PageHeader.length>0&&(this.consumeLocation(t.PageHeader[0].children.Slash,e),this.consumeLocation(t.PageHeader[0].children.Text,e)),t.Items.forEach((t=>{e.ЭлементыПарсинг.push(this.visit(t))})),this.addChildLocation(e.ЭлементыПарсинг,e),e}OneLineGroup(t){let e={Тип:"ОднострочнаяГруппа",НаборСвойств:{},Элементы:[],ЭлементыПарсинг:[],Координаты:{}};return t.Items.forEach((t=>{e.ЭлементыПарсинг.push(this.visit(t))})),this.addChildLocation(e.ЭлементыПарсинг,e),e}Inline(t){let e={Тип:"СтрочныйЭлемент",НаборСвойств:{},ЭлементыПарсинг:[],ТипыСвойств:{},Координаты:{}};return e.ЭлементыПарсинг=[t.Items.map((t=>t.image)).join("")],this.consumeLocation(t.Items,e),e}addChildLocation(t,e){t.forEach((t=>{for(const[n,r]of Object.entries(t.Координаты))this.consumeLocationInResult(e,n,r["Лево"],r["Право"])}))}consumeLocation(t,e){t.forEach((t=>{let n="Строка_"+t.startLine.toString();this.consumeLocationInResult(e,n,t.startColumn,t.endColumn)}))}consumeLocationInResult(t,e,n,r){let i=t.Координаты[e];void 0===i?t.Координаты[e]={Лево:n,Право:r}:r>i["Право"]?i["Право"]=r:i["Лево"]=n}};window.parseInputInner=function(t){const e=y.tokenize(t);_.input=e.tokens;const n=_.Form(),r=L.visit(n);return JSON.stringify(r,null,2)},window.parseInput=function(t){let e="";try{e=window.parseInputInner(t)}catch(t){return"Ошибка: "+t.name+":"+t.message+"\n"+t.stack}return e}})();